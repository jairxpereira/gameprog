<html><head>
<title>darkbasicPro_track14</title>
<style type="text/css">

span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #000000;
}
.sc0 {
}


.sc1 {
	color: darkgreen;
	font-weight: bold;
}


.sc2 {
	color: #008000;
}
.sc4 {
	color: #ff8000;
}
.sc5 {
	font-weight: bold;
	color: #0000FF;
}
.sc6 {
	color: #FF0000;
}
.sc9 {
	color: #804000;
	font-weight: bold;
}
.sc10 {
	font-weight: bold;
	color: #000080;
}
.sc11 {
}
.sc16 {
	color: #400080;
}

.prg {
	color: #0000FF;
}

.prg-saida {

	margin-left:50px;
	width:500pt;
	background-color:lightblue;
}

.prg-code {
	margin-left:50px;
	width:500pt;
	background-color:lightyellow;
}


.niceview {
	margin-left:50px;
	width:500pt;
	background-color:white;
	border-color:lightgray;
	border-width:1px;
	border-style:solid;
}

td
{
padding:3px;
}

table.dados
{

margin-left:50px;
width:45.0em;
border-collapse:collapse;
border:1px solid red;
text-align:center;


}

th
{
background-color:darkgreen;
color:yellow;
font-weight:bold;
text-transform:uppercase;
}
body
{
margin-left:60px;
}


</style></head>
<body><font color="black"><pre>
<hr>
<center><b>GAMEPROG - Escola de programação de jogos digitais</b><br><b>Contato: Jair Pereira - gameprog.br@gmail.com</b><br><b>Curso completo de Darkbasic Pro Versão 1.069</b><br><b>track14.html</b><br></center><table align=bottom border=0 cellspacing=0 cellpadding=0 width=20%>
<tr><td><a href=dbpro.html style='color:blue'> index </a></td><td><a href='track13.html'style='color:blue'>&lt;&lt;</a></td><td><a href='track15.html'style='color:blue'>&gt;&gt;</a></td></tr></table>

<a name="track14"></a>                                                                                                  
<h3 style="background-color:#80ff80">14. Terrenos 1/2</h3>                                                              
 O terreno no DarkBasic é basicamente um plano com a possibilidade de ser                                               
 segmentado, reposicionado e texturizado.                                                                               
        <img src="matrix.jpg">                                                                                          
 Cada polígono resultante da segmentação vertical e horizontal pode ser                                                 
 texturizado individualmente. Os pontos ou vértices destes polígonos                                                    
 podem ser reposicionados para ser criar elevações e depressões no                                                      
 relevo do terreno. Cada polígono ganha uma coordenada que representa                                                   
 sua posição no terreno, por exemplo na nossa foto, o primeiro polígono                                                 
 tem coordenada (0,0), e o último coordenada (3,2); essas coordenadas                                                   
 são usadas como referência para texturização e reposicionamento.                                                       
                                                                                                                        
 Cada ponto ou vértice ganha uma coordenada conforme sua localização no                                                 
 terreno, na nosso foto alguns vértices estão identificados com um                                                      
 pontinho vermelho. O primeiro vértice tem coordenada (0,0), e o último                                                 
 na nossa foto tem coordenada (4,3) que é o último do canto direito superior.                                           
 É necessário prestar atenção nesse sistema de coordenada e localização de                                              
 cada vértice na matrix para que depois você possa levantar cada vértice                                                
 corretamente e assim criar elevações e depressões no relevo do seu terreno.                                            
                                                                                                                        
 No inglês do DarkBasic o terreno recebe o nome de <b>matrix</b>, e esta é a palavra                                    
 chave dos comandos que manipulam a criação de terrenos. O quadradinho que                                              
 chamamos de polígono, o Darkbasic nomeia-o como <b>tile</b>, azulejo em                                                
 português.                                                                                                             
                                                                                                                        
 Como todo e qualquer objeto e imagem, a matrix deve receber um número de                                               
 identificação pelo qual o terreno criado vai ser manipulado.                                                           
                                                                                                                        
 <u>MAKE MATRIX nMtx, nLargura, nProfundidade, xseg, zseg</u>                                                           
 Este comando cria um terreno 3D.                                                                                       
                                                                                                                        
 nMtx           É o handle da matrix                                                                                    
                                                                                                                        
 nLargura       É a largura da matrix. Dentro da janela perspective                                                     
                do 3dStudio corresponde ao movimento X.                                                                 
                                                                                                                        
 nProfundidade  É a profundidade da matrix. Dentro da janela perspective                                                
                do 3dstudio corresponde ao movimento Y.                                                                 
                                                                                                                        
 xseg           Define o fatiamento horizontal da matrix.                                                               
                                                                                                                        
 zseg           Define o fatiamento vertical da matrix                                                                  
                                                                                                                        
 Ex.: <font color="darkgreen">                                                                                          
                                                                                                                        
 cls                                                                                                                    
 make matrix 1,1000,1000,4,3                                                                                            
                                                                                                                        
 position camera 950,300,1500                                                                                           
 point camera 10,-500,-500                                                                                              
 suspend for key </font>                                                                                                
 <img src="mtx4x3.jpg">                                                                                                 
                                                                                                                        
 <u>PREPARE MATRIX TEXTURE nMtx, nImg, xseg, yseg</u>                                                                   
 Este comando prepara uma imagem para texturizar uma matrix.                                                            
                                                                                                                        
 nMtx           é a matrix que será texturizada.                                                                        
                                                                                                                        
 nmg            é a imagem fonte da textura. Ela tem que ser quadrada. Pode                                             
                ser uma dos padrões: 256x256, 128x128, 64x64, 32x32, 16x16                                              
                8x8,4x4,2x2.                                                                                            
                                                                                                                        
 xseg           determina o fatiamento horizontal da imagem                                                             
                                                                                                                        
 yseg           determina o fatiamento vertical da imagem.                                                              
                                                                                                                        
 Ex. <font color="darkgreen">                                                                                           
                                                                                                                        
 PREPARE MATRIX TEXTURE 1,1,2,2 </font>                                                                                 
                                                                                                                        
 Este comando nesta configuração, recorta uma imagem 256x256 em quatro                                                  
 partes iguais. Cada quadrante torna-se uma referência de textura.                                                      
 Cada textura é acessada pelo número do quadrante aonde ela está localizada                                             
 na imagem. O esquema é este:                                                                                           
                                                                                                                        
 [1][2] prepare matrix texture 1,1,2,2                                                                                  
 [3][4] As texturas serão 1,2,3,4.                                                                                      
 <img src="textura2x2.jpg">                                                                                             
                                                                                                                        
 <u>FILL MATRIX nAltura, nAltura#, nTexturaTile</u>                                                                     
 Este comando texturiza completamente uma matrix com a nTexturaTile especificada                                        
 que está na imagem que foi preparada previamente com <b>PREPARE MATRIX TEXTURE.</b>                                    
 Este comando também reconfigura a altura do terreno, com a altura dada em nAltura#.                                    
 Na nossa textura de exemplo, cada quadrante tem uma textura diferente, esse                                            
 quadrante com textura o DarkBasic também chama de <b>tile</b>, então esse                                              
 argumento nTexturaTile pode-se chamar nTile e assim é referenciado em alguns                                           
 comandos do DarkBasic que mexem com textura.                                                                           
                                                                                                                        
 Para usá-lo você deve ter carregado a imagem, recortado ela em um tamanho                                              
 padrão de textura; e por último tê-la preparada via <b>PREPARE MATRIX TEXTURE</b>.                                     
                                                                                                                        
 Ex. <font color="darkgreen">                                                                                           
                                                                                                                        
 PREPARE MATRIX 1,1,2,2                                                                                                 
 FILL MATRIX 1,0.0,3         rem Texturiza com imagem do terceiro quadrante. </font>                                    
                                                                                                                        
 Veja nosso programa exemplo:                                                                                           
<font color="darkblue"><div style="background-color:lightyellow">                                                       
 cls                                                                                                                    
                                                                                                                        
 load image "c:\media\textura2x2.bmp",1                                                                                 
                                                                                                                        
 make matrix 1,1000,1000,4,3                                                                                            
 prepare matrix texture 1,1,2,2                                                                                         
                                                                                                                        
 fill matrix 1,0.0,2                                                                                                    
                                                                                                                        
 position camera 500,200,-600                                                                                           
                                                                                                                        
 suspend for key                                                                                                        
 <img src="fillmatrix.jpg">                                                                                             
 </div></font>                                                                                                          
                                                                                                                        
 <u>SET MATRIX HEIGHT nMtx, vx, vz, nAltura</u>                                                                         
 Este comando levanta um vértice da matrix especificada.                                                                
                                                                                                                        
 vx é a localização horizontal do vértice, o primeiro (0)                                                               
 está localizado no canto inferior esquerdo da matrix.                                                                  
                                                                                                                        
 vz é a coordenada de profundidade do vértice na matrix,o                                                               
 primeiro (0) está localizado no canto inferior esquerdo                                                                
 da matrix.                                                                                                             
                                                                                                                        
 nAltura é a nova altura do vértice.                                                                                    
                                                                                                                        
 Para levantar um polígono você precisa de uma sequência                                                                
 desse comando para levantar os quatro vértices do polígono.                                                            
                                                                                                                        
 Ex.: <font color="darkgreen">                                                                                          
                                                                                                                        
 SET MATRIX HEIGHT 1,2,1,200 </font>                                                                                    
                                                                                                                        
 <img src="setmtxhei.jpg">                                                                                              
                                                                                                                        
 <u>SET MATRIX TILE nMtx, tx, tz, nTile</u>                                                                             
 Este comando texturiza individualmente um polígono da matrix, na coordenada                                            
 dada por (tx,tz), com a subtextura nTile especificada de uma imagem de                                                 
 textura.                                                                                                               
                                                                                                                        
 Para usá-lo você deve ter carregado a imagem, recortado ela em um tamanho                                              
 padrão de textura; e por último tê-la preparada via <b>PREPARE MATRIX TEXTURE</b>.                                     
                                                                                                                        
 tx é a localização horizontal do polígono, o primeiro (0)                                                              
 está localizado no canto inferior esquerdo da matrix. Essa                                                             
 coordenada aumenta conforme o deslocamento para a direta                                                               
 da matrix.                                                                                                             
                                                                                                                        
 tz é a coordenada de profundidade do polígono na matrix,o                                                              
 primeiro (0) está localizado no canto inferior esquerdo                                                                
 da matrix. Essa coordenada aumenta conforme o polígono vai                                                             
 adentrando-se na matrix.                                                                                               
                                                                                                                        
 Ex.: <font color="darkgreen">                                                                                          
 for tx = 1 to 3                                                                                                        
 set matrix tile 1,tx,0,1                                                                                               
 set matrix tile 1,tx,2,1                                                                                               
 next tx                                                                                                                
 set matrix tile 1,1,1,2                                                                                                
 set matrix tile 1,2,1,2                                                                                                
 set matrix tile 1,1,0,3                                                                                                
 set matrix tile 1,2,0,4 </font>                                                                                        
                                                                                                                        
 <img src="setmtxtile.jpg">                                                                                             
                                                                                                                        
<hr>                                                                                                                    

<table align=bottom border=0 cellspacing=0 cellpadding=0 width=20%>
<tr><td><a href=dbpro.html style='color:blue'> index </a></td><td><a href='track13.html'style='color:blue'>&lt;&lt;</a></td><td><a href='track15.html'style='color:blue'>&gt;&gt;</a></td></tr></table>
<hr><div style='background-color:lightyellow;color:blue'>
<center>Produzido por Gameprog: Jair Pereira - Fev/2006 - Setembro/2013 ©
gameprog.br@gmail.com
<a href='http://www.gameprog.com.br'>http://www.gameprog.com.br</a>
<a href='http://www.nucleoararat.com.br'>http://www.nucleoararat.com.br</a></center><hr></div></body></html>
