<html>
<head>
<title>DarkGdk_fase05.3</title>
<head>
<style type="text/css">
.dica {	width:500pt; background:aliceblue;color:#700080}
span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #000000;
}
.sc0 {
}


.sc1 {
	color: darkgreen;
	font-weight: bold;
}

.sntx {
	color: darkgreen;
	}


.sc2 {
	color: #008000;
}
.sc4 {
	color: #ff8000;
}
.sc5 {
	font-weight: bold;
	color: #0000FF;
}
.sc6 {
	color: #FF0000;
}
.sc9 {
	color: #804000;
	font-weight: bold;
}
.sc10 {
	font-weight: bold;
	color: #000080;
}
.sc11 {
}
.sc16 {
	color: #400080;
}

.prg {
	color: #0000FF;
}

.prg-saida {

	margin-left:0px;
	width:500pt;
	background-color:lightblue;
	
}

.prg-code {
	margin-left:0px;
	width:500pt;
	background-color:lightyellow;
	padding:10px;
	font-weight:bold;
}


.niceview {
	margin-left:0px;
	width:500pt;
	background-color:white;
	border-color:lightgray;
	border-width:1px;
	border-style:solid;
	padding:10px;
}

td
{
padding:3px;
}

table.dados
{

margin-left:0px;
width:53.5em;
border-collapse:collapse;
border:1px solid red;
text-align:center;
}

th
{
background-color:darkgreen;
color:yellow;
font-weight:bold;
text-transform:uppercase;
}
body
{
margin-left:60px;


</style>

<body><font color="black">
<hr>
<center><b style="font-size:1.5em;" >Curso completo de DarkGdk</b><br>
Gameprog - Escola de programação de jogos digitais<br>
Contato: gameprog.br@gmail.com<br>
<b>Fase 5.3</b></center>
<hr>
<table align="left" border="0" cellspacing="0" cellpadding="0" width="20%">
<tr><td><a href="darkgdk.html#start" style="color:blue"> index </a></td>
<td><a href="track05-2.html" style="color:blue">&lt;&lt;</a></td>
<td><a href="track05-4.html" style="color:blue">&gt;&gt;</a></td></tr></table><br><br>
<hr><a name="track01"></a><h3 style="background-color:#80ff80">05.3 Desenho 2D</h3><pre>
<b><u>05.2 Visão geral</b></u>

Nesta seção vamos aprender a usar as funções que desenham caixas, círculos,
elipses e demais funções básicas de desenho 2D.
 
 <b><u>Testando funções de bitmap</b></u>
 <img src="images/desenho2d01.png">
<div class=prg-code><span class="sc2">// desenho2d01.cpp
// Esse programa testa funções de desenho 2d
</span><span class="sc9">#include "DarkGDK.h"
</span><span class="sc0">
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">initsys</span><span class="sc10">();</span><span class="sc0">                     </span><span class="sc2">// inicializa o sistema
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">tst_desenho2d</span><span class="sc10">();</span><span class="sc0">               </span><span class="sc2">// Testa funções 2d
</span><span class="sc0">
</span><span class="sc2">// Cores
</span><span class="sc16">const</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">nPreto</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc16">const</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">nBranco</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0xFFFFFF</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc2">// ----------------------------------------------------------------------------
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">DarkGDK</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc2">//  Começo da aplicação DarkGdk
</span><span class="sc0">
</span><span class="sc11">initsys</span><span class="sc10">();</span><span class="sc0">  

</span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">LoopGDK</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">     
</span><span class="sc11">tst_desenho2d</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc11">dbSync</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim do while
</span><span class="sc0">
</span><span class="sc5">return</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim da função: DarkGDK
</span><span class="sc0">
</span><span class="sc2">// ----------------------------------------------------------------------------
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">initsys</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">    
</span><span class="sc2">// Esta função inicializa o sistema
</span><span class="sc11">dbSyncOn</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0"> </span><span class="sc11">dbSyncRate</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc4">60</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbCLS</span><span class="sc10">(</span><span class="sc11">nBranco</span><span class="sc10">);</span><span class="sc0"> 
</span><span class="sc11">dbSetWindowTitle</span><span class="sc10">(</span><span class="sc6">"desenho2d01.cpp"</span><span class="sc10">);</span><span class="sc0"> 
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim da função: initsys()
</span><span class="sc0">

</span><span class="sc2">// ----------------------------------------------------------------------------
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">tst_desenho2d</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc2">// variáveis de trabalho
</span><span class="sc0"></span><span class="sc16">char</span><span class="sc0"> </span><span class="sc11">txt</span><span class="sc10">[</span><span class="sc4">255</span><span class="sc10">];</span><span class="sc0">
</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">cor</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">r</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">g</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">371</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">21</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc2">// Elenco de cores básicas
</span><span class="sc0"></span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">nAzul</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">dbRGB</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">255</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">nVerde</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">dbRGB</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">255</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">nVermelho</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">dbRGB</span><span class="sc10">(</span><span class="sc4">255</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">nMagenta</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">dbRGB</span><span class="sc10">(</span><span class="sc4">255</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">255</span><span class="sc10">);</span><span class="sc0">

</span><span class="sc11">dbInk</span><span class="sc10">(</span><span class="sc11">nPreto</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">nBranco</span><span class="sc10">);</span><span class="sc0">

</span><span class="sc2">// Desenha olho com linha preta e fundo branco
</span><span class="sc0"></span><span class="sc11">dbCircle</span><span class="sc10">(</span><span class="sc4">160</span><span class="sc10">,</span><span class="sc4">120</span><span class="sc10">,</span><span class="sc4">80</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbCircle</span><span class="sc10">(</span><span class="sc4">160</span><span class="sc10">,</span><span class="sc4">120</span><span class="sc10">,</span><span class="sc4">30</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbEllipse</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc4">160</span><span class="sc10">,</span><span class="sc4">120</span><span class="sc10">,</span><span class="sc4">160</span><span class="sc10">,</span><span class="sc4">80</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbLine</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">120</span><span class="sc10">,</span><span class="sc4">320</span><span class="sc10">,</span><span class="sc4">120</span><span class="sc10">);</span><span class="sc0"> 

</span><span class="sc2">// Desenha um pontinho no olho
</span><span class="sc0"></span><span class="sc11">dbDot</span><span class="sc10">(</span><span class="sc4">150</span><span class="sc10">,</span><span class="sc4">110</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc11">dbDot</span><span class="sc10">(</span><span class="sc4">151</span><span class="sc10">,</span><span class="sc4">110</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbDot</span><span class="sc10">(</span><span class="sc4">150</span><span class="sc10">,</span><span class="sc4">111</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc11">dbDot</span><span class="sc10">(</span><span class="sc4">151</span><span class="sc10">,</span><span class="sc4">111</span><span class="sc10">);</span><span class="sc0">

</span><span class="sc2">// Desenha sobrancelha azul
</span><span class="sc0"></span><span class="sc11">dbInk</span><span class="sc10">(</span><span class="sc11">nAzul</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">nBranco</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbBox</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc4">10</span><span class="sc10">,</span><span class="sc4">10</span><span class="sc10">,</span><span class="sc4">320</span><span class="sc10">,</span><span class="sc4">30</span><span class="sc10">);</span><span class="sc0">

</span><span class="sc2">// Desenha caixa multicolorida
</span><span class="sc0"></span><span class="sc11">dbBox</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc4">370</span><span class="sc10">,</span><span class="sc4">20</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">470</span><span class="sc10">,</span><span class="sc4">250</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">nAzul</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">nVerde</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">nVermelho</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">nMagenta</span><span class="sc10">);</span><span class="sc0">

</span><span class="sc2">// Verificação de cor de determinado ponto (x,y);
</span><span class="sc0"></span><span class="sc11">cor</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">dbPoint</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">r</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">dbRGBR</span><span class="sc10">(</span><span class="sc11">cor</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">g</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">dbRGBG</span><span class="sc10">(</span><span class="sc11">cor</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">b</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">dbRGBB</span><span class="sc10">(</span><span class="sc11">cor</span><span class="sc10">);</span><span class="sc0">    
</span><span class="sc11">sprintf</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">txt</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"Cor no ponto (%d,%d): (%d, %d, %d)"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">r</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">g</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc2">// Sinaliza o ponto verificado
</span><span class="sc0"></span><span class="sc11">dbCircle</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">,</span><span class="sc11">y</span><span class="sc10">,</span><span class="sc4">20</span><span class="sc10">);</span><span class="sc0">  </span><span class="sc11">dbCircle</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">,</span><span class="sc11">y</span><span class="sc10">,</span><span class="sc4">10</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc11">dbLine</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">,</span><span class="sc11">y</span><span class="sc10">,</span><span class="sc4">250</span><span class="sc10">,</span><span class="sc4">230</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbText</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc4">20</span><span class="sc10">,</span><span class="sc4">230</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">txt</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim tst_desenho2d()</span></div>

<b><u>Desenhando pontos</b></u><span class=prg>
// Desenha um pontinho no olho
<b>dbDot(150,110); dbDot(151,110);</b>
dbDot(150,111); dbDot(151,111); </span>
A função <b>dbDot()</b> desenha um ponto na coordenada (x,y) especificada. A cor
do ponto é dada pela função dbInk(), isso vale para as demais funções 2D 
incluindo funções de texto.


<b><u>Desenhando quadrados e retângulos</b></u><span class=prg>
// Desenha sobrancelha azul
dbInk(nAzul, nBranco);
<b>dbBox (10,10,320,30);</b> </span>
<b class=sc2>dbBox (nEsquerda,nTopo,nDireita,nFundo);</b> 
A função dbBox() desenha uma caixa a partir das coordenadas especificadas: 
(nEsquerda, nTopo) - ponto inicial da caixa
(nDireita, nFundo) - ponto final da caixa

<b><u>Desenhando uma caixa multicolorida</b></u><span class=prg>
// Desenha caixa multicolorida
// Elenco de cores básicas
int nAzul = dbRGB(0,0,255);
int nVerde = dbRGB(0,255,0);
int nVermelho = dbRGB(255,0,0);
int nMagenta = dbRGB(255,0,255);
<b>dbBox (370,20, 470,250, nAzul, nVerde, nVermelho, nMagenta); </b></span>
A função dbBox() tem uma segunda sintaxe que permite desenhar uma caixa
multicolorida. Basta você incluir no conjunto de argumentos 4 números 
inteiros que representam cores.

<b><u>Desenhando círculos</b></u><b class=prg>
dbCircle(160,120,80); </b>
<b class=sc2>dbCircle(xpos,ypos,nraio);</b>
A função <b>dbCircle()</b> desenha um círculo na posição especificada <b>(xpos, ypos)</b>
com um raio do tamanho <b>nraio.</b>

<b><u>Elipses</b></u><b class=prg>
dbEllipse (160,120,160,80);</b>
<b class=sc2>dbEllipse (xpos,ypos,xraio,yraio);</b>
A função <b>dbEllipse()</b> desenha uma elipse na posição especificada pela coordenada
<b>(xpos, ypos)</b>. O largura ou raio horizontal é definido por <b>xraio</b>, e a altura ou
raio vertical é definido por <b>yraio.</b>

<b><u>Manipulando cores dentro do padrão RGB</b></u><b class=prg>
int nVermelho = dbRGB(255,0,0); 	// (R) red
int nVerde = dbRGB(0,255,0);		// (G) green
int nAzul = dbRGB(0,0,255);		// (B) blue</b>

A cor é representada por um número inteiro de 24 bits cuja faixa de valor 
varia de 0 a 16.777.216; a função <b>dbRGB(nRed, nGreen, nBlue)</b> combina as
taxas de vermelho, verde e azul passadas como argumentos e retorna um
valor integral de 24 bits.

Existe a necessidade contrária de a partir desse número integral obter 
isoladamente as taxas de vermelho, verde e azul. Isso é obtido através
das funções abaixo:<b class=prg>

nVermelho = dbRGBR(nCor);	// Obtém a taxa de vermelho
nVerde = dbRGBG(nCor);		// Obtém a taxa de verde
nAzul = dbRGBB(nCor);		// Obtém a taxa de azul. </b>

Lembramos que a faixa limite de valor das taxas é um número de 8 bits
e vai de 0 a 255.

<b><u>Descobrindo a cor de um ponto na tela ou imagem</b></u><span class=prg>
// Verificação de cor de determinado ponto (x,y);
<b>cor = dbPoint (x, y);</b>
r = dbRGBR(cor);
g = dbRGBG(cor);
b = dbRGBB(cor);    
sprintf (txt, "Cor no ponto (%d,%d): (%d, %d, %d)", x, y, r, g, b);
// Sinaliza o ponto verificado
dbCircle (x,y,20);  dbCircle (x,y,10); dbLine (x,y,250,230);
dbText (20,230, txt); </span>

A função <b>dbPoint()</b> retorna um valor inteiro de 24 bits correspondente ao ponto
da posição especificada <b>(x,y)</b>. É uma função interessante porque com ela você
pode realizar uma verificação de colisão baseado na cor encontrada, por exemplo,
se seu jogador tropeçou numa mancha verde ele perde energia por expor-se a 
material radioativo.	
Outro recurso valioso que pode ser implementando usando <b>dbPoint()</b> é o 
escaneamento da tela ou de um bitmap para copiá-lo para outra parte ou
gravá-lo em arquivo.

<div class=dica>
<b>// Sinaliza o ponto verificado
dbCircle (x,y,20);  dbCircle (x,y,10);</b>
Sinalize os pontos para desenhar linhas, quadrados, textos com círculos. Isso
permite a assimilação rápida dos melhores ajustes para o posicionamento
final dos seus objetos.</div>
<hr>	
<table align="bottom" border="0" cellspacing="0" cellpadding="0" width="20%">
<tr><td><a href="darkgdk.html#start" style="color:blue"> index </a></td>
<td><a href="track05-2.html" style="color:blue">&lt;&lt;</a></td>
<td><a href="track05-4.html" style="color:blue">&gt;&gt;</a></td></tr></table><br><pre>
<hr>

<div style='background-color:lightyellow;color:blue'>
<center>Produzido por Gameprog: Jair Pereira - Setembro/2013 ©
gameprog.br@gmail.com
<a href='http://www.gameprog.com.br'>http://www.gameprog.com.br</a>
<a href='http://www.nucleoararat.com.br'>http://www.nucleoararat.com.br</a></center><hr></div></body></html>
