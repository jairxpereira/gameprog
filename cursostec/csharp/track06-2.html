<html>
<head>
<title>C_Sharp_06-2</title>
<head>
<style type="text/css">

span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #000000;
}
.sc0 {
}


.sc1 {
	color: darkgreen;
	font-weight: bold;
}

.sntx {
	color: darkgreen;
	}


.sc2 {
	color: #008000;
}
.sc4 {
	color: #ff8000;
}
.sc5 {
	font-weight: bold;
	color: #0000FF;
}
.sc6 {
	color: #FF0000;
}
.sc9 {
	color: #804000;
	font-weight: bold;
}
.sc10 {
	font-weight: bold;
	color: #000080;
}
.sc11 {
}
.sc16 {
	color: #400080;
}

.prg {
	color: #0000FF;
}

.prg-saida {

	margin-left:0px;
	width:500pt;
	background-color:lightblue;
	
}

.prg-code {
	margin-left:0px;
	width:500pt;
	background-color:lightyellow;
	padding:10px;
	font-weight:bold;
}


.niceview {
	margin-left:0px;
	width:500pt;
	background-color:white;
	border-color:lightgray;
	border-width:1px;
	border-style:solid;
	padding:10px;
}

td
{
padding:3px;
}

table.dados
{

margin-left:0px;
width:53.5em;
border-collapse:collapse;
border:1px solid red;
text-align:center;


}

th
{
background-color:darkgreen;
color:yellow;
font-weight:bold;
text-transform:uppercase;
}

.pagebody
{
padding:10px;
margin-left:50px;
border-width:1px;
border-style:solid;
border-color:white;
background-color:white;
width:90%;
}
.mybody
{
margin-top:20pt;
margin-bottom:20pt;
margin-left:20pt;
margin-right:20pt;
border-color:lightgray;
background-image:url('bg_azul.png');
}
</style>
<body class=mybody><font color="black">
<div class=pagebody>
<hr>
<center><b style="font-size:1.5em;" >Curso completo de linguagem C#</b><br>
Gameprog - Escola de programação de jogos digitais<br>
Contato: gameprog.br@gmail.com<br>
<b>Fase 06-2</b></center>
<hr>
<table align="left" border="0" cellspacing="0" cellpadding="0" width="20%">
<tr><td><a href="csharp.html#start" style="color:blue"> index </a></td>
<td><a href="track06-1.html" style="color:blue">&lt;&lt;</a></td>
<td><a href="track06-3.html" style="color:blue">&gt;&gt;</a></td></tr></table><br><pre>
<hr><a name="track01"></a>
<h3 style="background-color:#ead5ff">06-2 Classes derivadas</h3><pre>
<b><u>1. Visão geral</b></u>
<img src="images/cls_derivada_simples.png">

No C# você pode criar  classes  derivadas  de  apenas uma classe base.

O diagrama acima ilustra as relações e  as  consequências  resultantes
de uma herança simples,  isto é,  uma  subclasse   que  é  derivada de 
apenas uma classe base e  herda  dela  as  propriedades e os  métodos. 

No  exemplo  acima todas  as  subclasses  ou  classes  filhas  possuem 
automaticamente o método <b>atacar()</b> e a propriedade <b>m_estrago</b> definidas 
na classe base Monstro. 

O construtor de cada subclasse pode reconfigurar diferentemente as 
propriedades  herdadas e pode redefinir os métodos para  que  eles  
tenham  o  comportamento  particular condizente com a natureza  da  
subclasse. Por exemplo, o  'vampiro'  ataca de forma diferente dos 
outros  monstros, por isso o seu método <b>atacar()</b> foi redefinido no 
projeto de exemplo. 

Se as propriedades não forem reconfiguradas e se os métodos não forem
redefinidos, eles terão os valores e os comportamentos exatamente como
foram  definidos  na  classe  base.  Ao lado dos recursos herdados, a 
subclasse  pode  desenvolver  individualmente  propriedades e métodos 
exclusivos a ela. Por exemplo, o 'vampiro'  do nosso exemplo  tem  um
método <b>dormir()</b> exclusivo.

Veja nosso exemplo:
<img src = "images/prj_classe02.png">
Em nosso programa, que emite a saída acima, definimos uma  classe  Monstro 
( a classe base) e derivamos duas subclasses dela: Ogro e Vampiro. As duas
subclasses herdam a propriedade <b>m_estrago</b> e o método <b>atacar()</b> da classe base.

Implementamos na subclasse Vampiro o método exclusivo <b>dormir()</b>. 
Dentro da classe Vampiro  o método <b>atacar()</b> foi redefinido para acomodar as
particularidades do objeto dessa subclasse. Para fazer isso a palavra-chave
<b class=prg>new</b>  foi  adicionada  na  assinatura do método para indicar que o método de 
mesmo  nome  da  classe  base  deve  ser escondido e que o novo método deve 
prevalescer.

<hr>
<b><u>2. Sintaxe de derivação </b></u><font color="darkblue">
<b>class Ogro: Monstro</b>	{	// código da classe	};	</font>
Esta é a sintaxe de derivação de classes, depois do nome da subclasse é colocado
dois pontos ( : ) e o nome da classe base (Monstro).

Diferente do C++, não há tipos de herança em C#. Desta forma, apenas os membros
assinalados como public ou protected são herdados pela subclasse. Portanto, na
linguagem C# isso não existe:
<div class=niceview><span style="color:red">
class Ogro: <b>public</b> Monstro</b>	{	// código da classe	};	
class Ogro: <b>private</b> Monstro</b>	{	// código da classe	};	
</span></div>

Vamos lembrar que os membros qualificados como <b class=prg>public</b> podem ser acessados
em qualquer parte do programa. Membros <b class=prg>private</b> podem ser acessados apenas 
de dentro da classe aonde  foram  definidos.  E  os  membros  protegidos, 
qualificados como <b class=prg>protected</b> são herdados porém são  de  uso  interno  da
subclasse não se extravazando para o acesso de classes clientes. 

<hr>
<b><u>Chamando o construtor da classe base</u></b>
<span class=prg>Ogro()<b>: Monstro(120) {} </b> 	   <span class=sc2>// Monstro a = new Mostro()</span>
Ogro(estrago)<b>: Monstro(estrago) {} </b><span class=sc2>// Monstro a = Monstro(99)</span></span>
Na assinatura do construtor da subclasse você pode chamar o contrutor da
classe base e passar  variáveis  para  lá  serem  inicializadas.  Nestes
exemplos,  os valores passados configuram o atributo <b>m_estrago</b> dentro da
classe base nos respectivos contrutores que foram sobrecarregados.

<hr>
<b><u>Redefinindo métodos na subclasse</u></b><span class=prg>
<span class=sc2>// new indica que o método da classe base será escondido!
// O Vampiro morde no ataque!</span>
<b>new</b> public void atacar()
{
  string msg = "";
  msg = " * {0}({1}) te mordeu e vc perdeu {2} pontos de energia";
  Console.WriteLine(msg, m_nome, m_id, m_estrago);
} // atacar().fim  </span>

A instrução <b class=prg>new</b> é necessária para redefinir particularmente os métodos existentes
na classe base. Aqui o método <b>atacar()</b> foi  redefinido na  subclasse  Vampiro; 
caso não tivesse sido, ele rodaria exatamente como foi definido na classe Monstro.
Mas essa abordagem tem um problema: quando você chama o método <b>atacar()</b> a partir
de uma array, o que roda é o método da classe base. Este problema é solucionado
com métodos virtuais. 

<hr>
<b><u>Introdução a classes virtuais</b></u>
A criação de array de objetos torna muito prático e confortável a manipulação de
muitos objetos. Por exemplo, utilizando as classes acima definidas poderíamos
criar uma lista de 100 vampiros e uma lista de 100 ogros e fazê-los atacar de uma
só vez.
		<font color="darkblue">
Vampiro[] lista_vampiros = new Vampiros[100];
Ogro[] lista_ogro = new Ogro[100];
for (int ncx = 0; ncx < 100; ncx++) {
	lista_ogro[ncx].atacar();
	lista_vampiros[ncx].atacar();
} // endfor </font>

No bloco acima criamos separadamente uma lista de ogros e vampiros. Sabemos
que essas duas classes são derivadas da classe base Monstro. Se você
tivesse 100 tipos de montros, aquele bloco de código acima ficaria imenso.

A sintaxe de classe virtual permite que você aliste numa array de monstros
vampiros e ogros e outros tipos de monstros que vc definir. Em palavras mais
técnicas, você consegue referenciar numa array de objetos da classe base todos
os tipos de objetos das subclasses. Quando você chamar o método <b>atacar()</b> dessa 
lista de objetos Monstros, se esse objeto for um vampiro ele atacará do jeito
particular de vampiro, se for um ogro atacará do jeito ogro de ser e tudo isso
você conseguirá fazer em poucas linhas dentro de um loop <b class=prg>for</b> ou <b class=prg>while</b>.

Nosso programa exemplo  apresenta um resultado indesejável de uma situação que 
necessitaria o uso de classes virtuais para ser corrigida: Os ogros e vampiros
definidos executam o método genérico  <b>atacar()</b> da classe base quando colocados
em uma array:

<div class=prg-code>
<span class="sc2">// Vamos criar uma array de monstros!
</span><span class="sc11">Monstro</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">inimigo</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc10">[</span><span class="sc4">5</span><span class="sc10">];</span><span class="sc0">
</span><span class="sc11">inimigo</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">godzila</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">inimigo</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">shrek</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">inimigo</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">fiona</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">inimigo</span><span class="sc10">[</span><span class="sc4">4</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">alucard</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">Write</span><span class="sc10">(</span><span class="sc6">"\n"</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">Write</span><span class="sc10">(</span><span class="sc6">" * Vamos atacar todos de uma vez via inimigo[ncx].atacar()\n"</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">WriteLine</span><span class="sc10">(</span><span class="sc6">" * Porém, somente roda o atacar() da classe base"</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc0"> </span><span class="sc10">&lt;=</span><span class="sc0"> </span><span class="sc4">4</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc10">++)</span><span class="sc0"> </span><span class="sc11">inimigo</span><span class="sc10">[</span><span class="sc11">ncx</span><span class="sc10">].</span><span class="sc11">atacar</span><span class="sc10">();</span></div>
Esse bloco de código está plenamente correto. Ele não produz o resultado
correto porque a classe não está definida como virtual. Vamos ver como
corrigir essa situação no próximo capítulo.

<hr>
<b><u>3. Membros estáticos</b></u>
<font color="darkblue">private static int nobj = 0;</font>
Com muita frequência vai haver a necessidade de realizarmos a contagem ou  
o controle de criação de objetos. Essa contagem é feita através do uso de
membros  estáticos  que podem ser definidos na sintaxe mostrada no código 
acima. Esse  membro vai ser  uma propriedade única da classe e não vai se
tornar particular de nenhum objeto. 

O acesso deve ser feito utilizando o nome da classe: <font color="darkblue">
nqtd = Monstro.nobj 			// acesso se fosse público...
nqtd = Monstro.get_qtd()		// acesso por um método público</font>

Você também pode definir a propriedade estática como <b>private</b> e assim para 
prover  acesso  a  ela você deve definir funções de acesso. Estas funções 
também podem ser definidas como  <b>static</b>  e assim elas serão únicas para a
classe tal como os atributos  definidos dessa forma.	
<span class=prg>
<span class=sc2>// Retorna a quantidade de monstros criados</span>
<b>public static int get_qtd()</b>
{
  int nqtd = 0;
  nqtd = <b>nobj</b> - 1;
  return nqtd;
}
</span>
<hr>
<b><u>4. Código fonte do projeto prj_classe02</b></u>

<div class=prg-code>
<img src=images\prj_classe02.png>
<span class="sc2">// Projeto prj_classe02 -  Arquivo:Monstro.cs
// Ilustra herança simples, redefinição de métodos (new)
// Membros estáticos; chamando o construtor da classe base
</span><span class="sc5">using</span><span class="sc0"> </span><span class="sc11">System</span><span class="sc10">;</span><span class="sc0">


</span><span class="sc5">namespace</span><span class="sc0"> </span><span class="sc11">prj_classe02</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
  </span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
   
    </span><span class="sc2">// atributos
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">m_estrago</span><span class="sc10">;</span><span class="sc0">   </span><span class="sc2">// capacidade de fazer estrago
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">m_id</span><span class="sc10">;</span><span class="sc0">        </span><span class="sc2">// identificador do objeto
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">string</span><span class="sc0"> </span><span class="sc11">m_nome</span><span class="sc10">;</span><span class="sc0">   </span><span class="sc2">// nome do objeto
</span><span class="sc0">    </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">nobj</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">    </span><span class="sc2">// contador de objetos
</span><span class="sc0">
    </span><span class="sc2">// Construtor 01 Mostro()
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc10">()</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
      
      </span><span class="sc11">m_estrago</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">10</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">m_nome</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"monstro"</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">m_id</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">nobj</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">nobj</span><span class="sc10">++;</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim do Construtor 01
</span><span class="sc0">
    </span><span class="sc2">// Construtor 02 Monstro (int nval)
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">estrago</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">m_estrago</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">estrago</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">m_nome</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"monstro"</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">m_id</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">nobj</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">nobj</span><span class="sc10">++;</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim do construtor 02
</span><span class="sc0">

    </span><span class="sc2">// atacar()
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">atacar</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc11">string</span><span class="sc0"> </span><span class="sc11">msg</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0"> 
    </span><span class="sc11">msg</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">" {0}({1}) te atacou e vc perdeu {2} pontos de energia"</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">WriteLine</span><span class="sc10">(</span><span class="sc11">msg</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">m_nome</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">m_id</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">m_estrago</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// atacar().fim
</span><span class="sc0">
    </span><span class="sc2">// Retorna a quantidade de monstros criados
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">get_qtd</span><span class="sc10">()</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">nqtd</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">nqtd</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">nobj</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">nqtd</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// get_qtd().fim
</span><span class="sc0">   
  </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim da classe
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim do namespace
</span><span class="sc0">
</span></div>

<div class=prg-code>


<span class="sc2">// Projeto prj_classe02 -  Arquivo: Ogro.cs
// Ilustra herança simples, redefinição de métodos (new)
// Membros estáticos; chamando o construtor da classe base
</span><span class="sc5">using</span><span class="sc0"> </span><span class="sc11">System</span><span class="sc10">;</span><span class="sc0">


</span><span class="sc5">namespace</span><span class="sc0"> </span><span class="sc11">prj_classe02</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
  </span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Ogro</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">

    </span><span class="sc2">// Construtor chama construtor da classe base 
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Ogro</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">base</span><span class="sc10">(</span><span class="sc4">120</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0">

    </span><span class="sc2">// Repassa valor para construtor da classe base
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Ogro</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">estrago</span><span class="sc10">):</span><span class="sc0"> </span><span class="sc11">base</span><span class="sc10">(</span><span class="sc11">estrago</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0">

  </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">
</span></div>


<div class=prg-code>

<span class="sc2">// Projeto prj_classe02 -  Arquivo: Vampiro.cs
// Ilustra herança simples, redefinição de métodos (new)
// Membros estáticos; chamando o construtor da classe base
</span><span class="sc5">using</span><span class="sc0"> </span><span class="sc11">System</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc5">namespace</span><span class="sc0"> </span><span class="sc11">prj_classe02</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
  </span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Vampiro</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc2">// Construtor chama construtor da classe base 
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Vampiro</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">base</span><span class="sc10">(</span><span class="sc4">22</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0">

    </span><span class="sc2">// Repassa valor para construtor da classe base
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Vampiro</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">estrago</span><span class="sc10">):</span><span class="sc0"> </span><span class="sc11">base</span><span class="sc10">(</span><span class="sc11">estrago</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0">

    
    </span><span class="sc2">// Método particular do vampiro
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">dormir</span><span class="sc10">()</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">WriteLine</span><span class="sc10">(</span><span class="sc6">" O sol está chegando. O vampiro foi dormir..."</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// dormir(0.fom
</span><span class="sc0">

    </span><span class="sc2">// new indica que o método da classe base será escondido!
</span><span class="sc0">    </span><span class="sc2">// O Vampiro morde no ataque!
</span><span class="sc0">    </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">atacar</span><span class="sc10">()</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">string</span><span class="sc0"> </span><span class="sc11">msg</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">msg</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">" * {0}({1}) te mordeu e vc perdeu {2} pontos de energia"</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">WriteLine</span><span class="sc10">(</span><span class="sc11">msg</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">m_nome</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">m_id</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">m_estrago</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// atacar().fim 
</span><span class="sc0">  </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim da classe
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim do namespace
</span></div>

<div class=prg-code>


<span class="sc2">// Projeto prj_classe02 -  Arquivo: Program.cs
// Ilustra herança simples, redefinição de métodos (new)
// Membros estáticos; chamando o construtor da classe base
</span><span class="sc5">using</span><span class="sc0"> </span><span class="sc11">System</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc5">namespace</span><span class="sc0"> </span><span class="sc11">prj_classe02</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
  </span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Program</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">Main</span><span class="sc10">(</span><span class="sc11">string</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">args</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc11">config_janela</span><span class="sc10">(</span><span class="sc6">"projeto prg_classe02"</span><span class="sc10">);</span><span class="sc0">

      </span><span class="sc2">// Vamos criar uma quadrilha de monstros
</span><span class="sc0">      </span><span class="sc11">Monstro</span><span class="sc0"> </span><span class="sc11">godzila</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc10">();</span><span class="sc0">         
      </span><span class="sc11">Ogro</span><span class="sc0"> </span><span class="sc11">shrek</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Ogro</span><span class="sc10">();</span><span class="sc0">
      </span><span class="sc11">Ogro</span><span class="sc0"> </span><span class="sc11">fiona</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Ogro</span><span class="sc10">(</span><span class="sc4">12</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">Vampiro</span><span class="sc0"> </span><span class="sc11">alucard</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Vampiro</span><span class="sc10">();</span><span class="sc0">      

      </span><span class="sc2">// Vamos configurar os nomes exceto godzila
</span><span class="sc0">      </span><span class="sc11">shrek</span><span class="sc10">.</span><span class="sc11">m_nome</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"Shrek"</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">fiona</span><span class="sc10">.</span><span class="sc11">m_nome</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"Fiona"</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">alucard</span><span class="sc10">.</span><span class="sc11">m_nome</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"Alucard"</span><span class="sc10">;</span><span class="sc0">

      </span><span class="sc2">// Vamos atacar 
</span><span class="sc0">      </span><span class="sc11">godzila</span><span class="sc10">.</span><span class="sc11">atacar</span><span class="sc10">();</span><span class="sc0">
      </span><span class="sc11">shrek</span><span class="sc10">.</span><span class="sc11">atacar</span><span class="sc10">();</span><span class="sc0">
      </span><span class="sc11">fiona</span><span class="sc10">.</span><span class="sc11">atacar</span><span class="sc10">();</span><span class="sc0">     
      </span><span class="sc11">alucard</span><span class="sc10">.</span><span class="sc11">atacar</span><span class="sc10">();</span><span class="sc0">   

      </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">WriteLine</span><span class="sc10">(</span><span class="sc6">" Quantidade de monstros: #{0}"</span><span class="sc10">,</span><span class="sc0"> 
        </span><span class="sc11">Monstro</span><span class="sc10">.</span><span class="sc11">get_qtd</span><span class="sc10">());</span><span class="sc0">

      </span><span class="sc11">alucard</span><span class="sc10">.</span><span class="sc11">dormir</span><span class="sc10">();</span><span class="sc0">

      </span><span class="sc2">// Vamos criar uma array de monstros!
</span><span class="sc0">      </span><span class="sc11">Monstro</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">inimigo</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc10">[</span><span class="sc4">5</span><span class="sc10">];</span><span class="sc0">
      </span><span class="sc11">inimigo</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">godzila</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">inimigo</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">shrek</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">inimigo</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">fiona</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">inimigo</span><span class="sc10">[</span><span class="sc4">4</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">alucard</span><span class="sc10">;</span><span class="sc0">

      </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">Write</span><span class="sc10">(</span><span class="sc6">"\n"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">Write</span><span class="sc10">(</span><span class="sc6">" * Vamos atacar todos de uma vez via inimigo[ncx].atacar()\n"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">WriteLine</span><span class="sc10">(</span><span class="sc6">" * Porém, somente roda o atacar() da classe base"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc0"> </span><span class="sc10">&lt;=</span><span class="sc0"> </span><span class="sc4">4</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc10">++)</span><span class="sc0"> </span><span class="sc11">inimigo</span><span class="sc10">[</span><span class="sc11">ncx</span><span class="sc10">].</span><span class="sc11">atacar</span><span class="sc10">();</span><span class="sc0">
      
      </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">ReadKey</span><span class="sc10">();</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// Main().fim
</span><span class="sc0">
    </span><span class="sc2">// Método para configurar a janela
</span><span class="sc0">    </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">config_janela</span><span class="sc10">(</span><span class="sc11">String</span><span class="sc0"> </span><span class="sc11">titulo</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc2">// Vamos configurar a janela
</span><span class="sc0">      </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">ForegroundColor</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">ConsoleColor</span><span class="sc10">.</span><span class="sc11">Blue</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">BackgroundColor</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">ConsoleColor</span><span class="sc10">.</span><span class="sc11">White</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">Title</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">titulo</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">SetBufferSize</span><span class="sc10">(</span><span class="sc4">80</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">30</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">SetWindowSize</span><span class="sc10">(</span><span class="sc4">80</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">30</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">Clear</span><span class="sc10">();</span><span class="sc0">
      </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">Write</span><span class="sc10">(</span><span class="sc6">"\n"</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// config_janela() fim
</span><span class="sc0">  </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim da classe
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim do namespace
</span></div>
<hr>
<b><u>4. sealed - Negando a herança</u></b>
Com a instrução <b class=prg>sealed</b> é declarado que a classe não pode  ser  herdada
e que portanto não se deixará atuar como uma classe base.

Faça o teste desta palavra-chave utilizando o projeto de exemplo deste
capítulo. Altere a declaração da classe Monstro para esta forma:

	<span class=prg><b>sealed</b> class Monstro</span>
	
Isto vai coibir a herança e na compilação do projeto vai ocorrer uma 
mensagem avisando que as demais classes não podem herdar da classe
Monstro em questão.
	
<hr>	
<table align="bottom" border="0" cellspacing="0" cellpadding="0" width="20%">
<tr><td><a href="csharp.html#start" style="color:blue"> index </a></td>
<td><a href="track06-1.html" style="color:blue">&lt;&lt;</a></td>
<td><a href="track06-3.html" style="color:blue">&gt;&gt;</a></td></tr></table><br><pre>
<hr><div style="background-color:lightyellow;color:blue">
<center>Produzido por Gameprog: Jair Pereira - Março/2014 ©
gameprog.br@gmail.com
http://www.gameprog.com.br</center><hr></div></div></body></html>