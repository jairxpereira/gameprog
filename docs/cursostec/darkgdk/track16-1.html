<html>
<head>
<title>DarkGdk_fase16-1</title>
<head>
<style type="text/css">
.dica {	width:500pt; background:aliceblue;color:#700080}
span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #000000;
}
.sc0 {
}


.sc1 {
	color: darkgreen;
	font-weight: bold;
}

.sntx {
	color: darkgreen;
	}


.sc2 {
	color: #008000;
}
.sc4 {
	color: #ff8000;
}
.sc5 {
	font-weight: bold;
	color: #0000FF;
}
.sc6 {
	color: #FF0000;
}
.sc9 {
	color: #804000;
	font-weight: bold;
}
.sc10 {
	font-weight: bold;
	color: #000080;
}
.sc11 {
}
.sc16 {
	color: #400080;
}

.prg {
	color: #0000FF;
}

.prg-saida {

	margin-left:0px;
	width:500pt;
	background-color:lightblue;
	
}

.prg-code {
	margin-left:0px;
	width:500pt;
	background-color:lightyellow;
	padding:10px;
	font-weight:bold;
}


.niceview {
	margin-left:0px;
	width:500pt;
	background-color:white;
	border-color:lightgray;
	border-width:1px;
	border-style:solid;
	padding:10px;
}

td
{
padding:3px;
}

table.dados
{

margin-left:0px;
width:53.5em;
border-collapse:collapse;
border:1px solid red;
text-align:center;
}

th
{
background-color:darkgreen;
color:yellow;
font-weight:bold;
text-transform:uppercase;
}
body
{
margin-left:60px;
</style>
<body><font color="black">
<hr>
<center><b style="font-size:1.5em;" >Curso completo de DarkGdk</b><br>
Gameprog - Escola de programação de jogos digitais<br>
Contato: gameprog.br@gmail.com<br>
<b>Fase 16.1</b></center>
<hr>
<table align="left" border="0" cellspacing="0" cellpadding="0" width="20%">
<tr><td><a href="darkgdk.html#start" style="color:blue"> index </a></td>
<td><a href="track15-3.html" style="color:blue">&lt;&lt;</a></td>
<td><a href="track16-2.html" style="color:blue">&gt;&gt;</a></td></tr></table><br><br>
<hr><a name="track01"></a><h3 style="background-color:#80ff80">16.1 Introdução ao sistema de arquivos</h3><pre>
<b><u>1.1 Visão geral</b></u>
<img src="images\sistema_arquivos.png">	

A DarkGdk oferece funções para realizar as operações de sistemas de arquivos
como criar, renomear e deletar pastas; copiar, deletar e renomear arquivos
comuns.

Além das funções que DarkGdk oferece, você pode utilizar as funções de 
manipulação de arquivos da linguagem C++, e de maneira avançada você pode
utilizar diretamente as funções respectivas peculiares do sistema Windows.

As funções de gerenciamento de pastas e arquivos são importantes para você
controlar o conteúdo do seu jogo e realizar processos de instalação quando
necessário.

Vamos ver as seguintes funções neste tópico: <font color="darkblue">
dbCD()		dbSetDir()		dbGetDir()	dbDir()
dbDriveList()	dbWindir()		dbAppname()	dbFileExist()
dbPathExist()	dbExecuteFile() </font>

	<div class=dica >
Nos velhos sistemas operacionais de linha de comando, as <b>pastas</b> eram chamadas
de <b>diretórios.</b> Usamos aqui pastas e diretórios exatamente significando a mesma
coisa.</div>	
	
<b class=prg>sWindir = dbWindir();
char* dbWindir ( void );</b>
Esta função retorna o diretório de instalação do sistema Windows.
Ex.: <font color="darkblue">dbPrint ( dbWindir() );</font>


---------------------------------------------------------------------------
<b class=prg>sPrograma = dbAppname();
char* dbAppname ( void );</b>
Essa função retorna a linha de comando com nome e caminho da sua aplicação.
Ex.: <font color="darkblue">dbPrint ( dbAppname() );</font>		
	

---------------------------------------------------------------------------
<b class=prg>dbDir()
void dbDir ( void );</b>
Esta função exibe o conteúdo do diretório corrente.
Ex.: <font color="darkblue">dbDir();</font>


---------------------------------------------------------------------------
<b class=prg>dbDriveList()
void dbDriveList ( void ); </b>
Esta função exibe uma lista de drives do sistema
Ex.: <font color="darkblue">dbDriveList();</font>

<hr>
<b><u>1.2 Funções principais</b></u>
Agora vamos ver as funções mais úteis que certamente você vai usá-las
com mais frequência:


<b class=prg>sPasta = dbGetDir();
char* dbGetDir( void ); </b>
Esta função retorna o diretório corrente.
Ex.: <font color="darkblue">dbPrint( dbGetDir() );</font>


---------------------------------------------------------------------------
<b class=prg>dbCD( sPasta);
void dbCD ( char* pPath ); </b>
Esta função estabelece o diretório corrente.
Ex.: <font color="darkblue">dbCD( "c:\\Gameprog\\gdkMedia\\Instalador" );</font>

(*) Importante: <div class=dica >
Na denominação de caminhos ou no uso de strings e texto no seu programa
você deverá usar duas barras ("\\") para utilizar a barra como parte
da string tal como no exemplo acima. Isso é necessário porque em C/C++ 
essa barra é utilizada para assinalar caracteres especiais.
</div>

---------------------------------------------------------------------------
<b class=prg>nsts = dbFileExist( sArquivo);
int dbFileExist ( char* pFilename ); </b>
Esta função retorna 1 caso o arquivo especificado exista.
Ex.: <font color="darkblue">
if ( dbFileExist("c:\\windows\\notepad.exe") == 1) 
dbPrint("O arquivo c:\\windows\\notepad.exe existe!");</font>	


---------------------------------------------------------------------------
<b class=prg>nsts = dbPathExist( sCaminho);
int dbPathExist ( char* pFilename );</b>
Esta função retorna 1 caso o caminho especificado exista.
Ex.: <font color="darkblue">
if ( dbPathExist("c:\\windows\\media") == 1) 
dbPrint("A pasta c:\\windows\\media existe!");</font>


---------------------------------------------------------------------------
<b class=prg>dbSetDir( sPasta);
void dbSetDir ( char* pString ); </b>
Esta função estabelece  o  diretório  corrente,  podendo  o  diretório  ser 
estabelecido relativamente ao diretório corrente atual. 
Ex.: <font color="darkblue"> dbSetDir("..\\BCC55");</font>

<div class=dica >
' ..\BCC55 ' aqui pressupomos que existe um diretório BCC55 antes do diretório
atual.
</div>

---------------------------------------------------------------------------
<b class=prg>nsts = dbExecuteFile( sPrograma, sCaminho, sDiretorio);
void dbExecuteFile ( char* pFilename, char* pFilename2, char* pFilename3 ); </b>
Esta função executa uma aplicação.
Ex.: <font color="darkblue">
dbExecuteFile("notepad.exe","c:\\windows\\win.ini","");</font>	

<div class=dica >
Em nosso exemplo abrimos o arquivo <b>win.ini</b> que fica em c:\windows.
Conserve esse arquivo do jeito que está. Cuidado para não modificá-lo 
pois ele é um arquivo importante de configuração especialmente para
rodar programas antigos do Windows. </div>	

Veja nosso programa exemplo:
<div class=prg-code>
<img src="images\SistemaArquivos01.png">
<span class="sc2">// SistemaArquivos.cpp
// Este programa testa funções de sistema de arquivos
</span><span class="sc9">#include "DarkGDK.h"
</span><span class="sc0">
</span><span class="sc2">// Protótipo das funções
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">initsys</span><span class="sc10">();</span><span class="sc0">             </span><span class="sc2">// inicializa o sistema
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">avisar</span><span class="sc10">(</span><span class="sc16">char</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc11">cText</span><span class="sc10">);</span><span class="sc0">   </span><span class="sc2">// Exibe um aviso 
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">testar_dir</span><span class="sc10">();</span><span class="sc0">          </span><span class="sc2">// Testa funções de sistema de arquivos
</span><span class="sc0">
</span><span class="sc2">// ----------------------------------------------------------------------------
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">DarkGDK</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc2">//  Começo da aplicação DarkGdk
</span><span class="sc11">initsys</span><span class="sc10">();</span><span class="sc0"> 
</span><span class="sc11">testar_dir</span><span class="sc10">();</span><span class="sc0">


</span><span class="sc2">// Looping principal
</span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">LoopGDK</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> 
 </span><span class="sc11">dbSync</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0">

 </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">dbMouseClick</span><span class="sc10">()==</span><span class="sc4">2</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
  </span><span class="sc11">dbSync</span><span class="sc10">();</span><span class="sc0">
  </span><span class="sc11">MessageBox</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc6">"Rodando notepad.exe"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"dbExecuteFile()"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">MB_OK</span><span class="sc10">);</span><span class="sc0">
  </span><span class="sc11">dbExecuteFile</span><span class="sc10">(</span><span class="sc6">"notepad.exe"</span><span class="sc10">,</span><span class="sc6">"c:\\windows\\win.ini"</span><span class="sc10">,</span><span class="sc6">""</span><span class="sc10">);</span><span class="sc0">
  </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// endif
</span><span class="sc0">    
 </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim do while
</span><span class="sc5">return</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// endfunction DarkGDK()
</span><span class="sc0">
</span><span class="sc2">// ----------------------------------------------------------------------------
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">initsys</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">    
</span><span class="sc2">// Esta função inicializa o sistema
</span><span class="sc11">dbSyncOn</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbSetDisplayMode</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc4">800</span><span class="sc10">,</span><span class="sc4">600</span><span class="sc10">,</span><span class="sc4">32</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbSetWindowSize</span><span class="sc10">(</span><span class="sc4">800</span><span class="sc10">,</span><span class="sc4">600</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbCLS</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">dbRGB</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">255</span><span class="sc10">));</span><span class="sc0">
</span><span class="sc11">dbInk</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">dbRGB</span><span class="sc10">(</span><span class="sc4">255</span><span class="sc10">,</span><span class="sc4">255</span><span class="sc10">,</span><span class="sc4">255</span><span class="sc10">),</span><span class="sc0"> </span><span class="sc11">dbRGB</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc4">255</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbSetWindowTitle</span><span class="sc10">(</span><span class="sc6">"SistemaArquivos.cpp"</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc11">dbSetTextOpaque</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// initsys().fim
</span><span class="sc0">
</span><span class="sc2">// ----------------------------------------------------------------------------
</span><span class="sc0">
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">avisar</span><span class="sc10">(</span><span class="sc16">char</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">cText</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc11">dbPrint</span><span class="sc10">(</span><span class="sc6">" "</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbPrint</span><span class="sc10">(</span><span class="sc11">cText</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbPrint</span><span class="sc10">(</span><span class="sc6">"-------------------------------------------------------------------"</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// endfunction avisar()
</span><span class="sc0">
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">testar_dir</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">

</span><span class="sc11">avisar</span><span class="sc10">(</span><span class="sc6">" dbCD()  dbSetDir()  dbGetDir()  dbDir():"</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbCD</span><span class="sc10">(</span><span class="sc6">"c:\\Gameprog"</span><span class="sc10">);</span><span class="sc0"> 
</span><span class="sc11">dbPrint</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">dbGetDir</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0"> </span><span class="sc11">dbSetDir</span><span class="sc10">(</span><span class="sc6">"..\\BCC55"</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbDir</span><span class="sc10">();</span><span class="sc0">

</span><span class="sc11">avisar</span><span class="sc10">(</span><span class="sc6">" dbDriveList():"</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc11">dbDriveList</span><span class="sc10">();</span><span class="sc0">

</span><span class="sc11">avisar</span><span class="sc10">(</span><span class="sc6">"  dbWindir()  dbAppname():"</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbPrint</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">dbWindir</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">dbPrint</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">dbAppname</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0">

</span><span class="sc11">avisar</span><span class="sc10">(</span><span class="sc6">" dbFileExist()  dbPathExist()"</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">dbFileExist</span><span class="sc10">(</span><span class="sc6">"c:\\windows\\notepad.exe"</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">)</span><span class="sc0"> 
</span><span class="sc11">dbPrint</span><span class="sc10">(</span><span class="sc6">"O arquivo c:\\windows\\notepad.exe existe!"</span><span class="sc10">);</span><span class="sc0">

</span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">dbPathExist</span><span class="sc10">(</span><span class="sc6">"c:\\windows\\media"</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">)</span><span class="sc0"> 
</span><span class="sc11">dbPrint</span><span class="sc10">(</span><span class="sc6">"A pasta c:\\windows\\media existe!"</span><span class="sc10">);</span><span class="sc0">

</span><span class="sc11">avisar</span><span class="sc10">(</span><span class="sc6">"...botao direito do mouse para testar dbExecuteFile()"</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// endfunction testar_dir()
</span><span class="sc0"></span></div>		
<hr>	
<table align="bottom" border="0" cellspacing="0" cellpadding="0" width="20%">
<tr><td><a href="darkgdk.html#start" style="color:blue"> index </a></td>
<td><a href="track15-3.html" style="color:blue">&lt;&lt;</a></td>
<td><a href="track16-2.html" style="color:blue">&gt;&gt;</a></td></tr></table><br><pre>
<hr>
<div style='background-color:lightyellow;color:blue'>
<center>Produzido por Gameprog: Jair Pereira - Setembro/2013 ©
gameprog.br@gmail.com
<a href='http://www.gameprog.com.br'>http://www.gameprog.com.br</a>
<a href='http://www.nucleoararat.com.br'>http://www.nucleoararat.com.br</a></center><hr></div></body></html>
