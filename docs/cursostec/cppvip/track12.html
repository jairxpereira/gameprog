<html>
<head>
<title>Gameprog_CPP_fase_12</title>
<head>
<style type="text/css">


.dica {	width:500pt; background:aliceblue;color:#700080}
span {
font-family: 'Courier New';
font-size: 10pt;
color: #000000;
}
.sc0 {
}


.sc1 {
color: darkgreen;
font-weight: bold;
}

.sntx {
color: darkgreen;
}


.sc2 {
color: #008000;
}
.sc4 {
color: #ff8000;
}
.sc5 {
font-weight: bold;
color: #0000FF;
}
.sc6 {
color: #FF0000;
}
.sc9 {
color: #804000;
font-weight: bold;
}
.sc10 {
font-weight: bold;
color: #000080;
}
.sc11 {
}
.sc16 {
color: #400080;
}

.prg {
color: #0000FF;
}

.prg-saida {

margin-left:0px;
width:500pt;
background-color:lightblue;

}

.prg-code {
margin-left:0px;
width:500pt;
background-color:lightyellow;
padding:10px;
font-weight:bold;
}


.niceview {
margin-left:0px;
width:500pt;
background-color:white;
border-color:lightgray;
border-width:1px;
border-style:solid;
padding:10px;
}

td
{
padding:3px;
}

table.dados
{

margin-left:0px;
width:53.5em;
border-collapse:collapse;
border:1px solid red;
text-align:center;
}

th
{
background-color:darkgreen;
color:yellow;
font-weight:bold;
text-transform:uppercase;
}
body
{
margin-left:60px;
}
.pagebody
{
padding:10px;
margin-left:50px;
border-width:1px;
border-style:solid;
border-color:white;
background-color:white;
width:90%;
}
.mybody
{
margin-top:20pt;
margin-bottom:20pt;
margin-left:20pt;
margin-right:20pt;
/* border-width:1px; */
/* border-style:solid; */
border-color:lightgray;
background-image:url('bg_azul.png');
}
</style>
<body class=mybody><font color="black">
<div class=pagebody>
<hr>
<center><b style="font-size:1.5em;" >Curso completo de linguagem C++</b><br>
Gameprog - Escola de programação de jogos digitais<br>
Contato: gameprog.br@gmail.com<br>
<b>track12.html</b></center>
<hr>
<table border="0" cellspacing="0" cellpadding="0" width="20%">
<tr><td><a href="cppvip.html#start" style="color:blue"> index </a></td>
<td><a href="track11.html" style="color:blue">&lt;&lt;</a></td>
<td><a href="track13.html" style="color:blue">&gt;&gt;</a></td></tr></table>
<hr><pre>
<a name="track06"></a><h3 style="background-color:#80ff80">12.Classes 3/5 - classes derivadas</h3>
<b><u>12.1 Visão geral</b></u>
<img src="images/cls_derivada_simples.png">
Você pode criar  classes  derivadas  de  outras  classes. O  diagrama  acima  ilustra
as relações e  as  consequências  resultantes  de  uma  <u>herança simples</u>, isto é, uma
subclasse  que  é derivada de apenas uma superclasse e  herda  dela  as  propriedades
e os métodos. No  exemplo  acima todas  as  subclasses  ou  classes  filhas  possuem 
automaticamente o método atacar() e a propriedade m_estrago definidas na superclasse
monstro. 

O construtor de cada subclasse pode reconfigurar diferentemente as propriedades
herdadas e pode redefinir os métodos para  que  eles  tenham  o  comportamento
particular condizente com a natureza  da  subclasse. Se a s  propriedades  não
forem reconfiguradas e se os métodos  não  forem  redefinidos, eles  terão  os
valores e os comportamentos exatamente como  foram  definidos  na  superclasse.	
Ao lado dos recursos herdados, a subsclasse pode desenvolver individualmente
propriedades e método exclusivos a ela.

Veja nosso exemplo:
<img src = "images/heranca_simples.png">
Em nosso programa, que emite a saída acima, definimos uma  classe  Monstro 
( a classe base) e derivamos duas subclasses dela: Ogro e Vampiro. As duas
subclasses herdam a propriedade <b>m_estrago</b> e o método <b>atacar()</b> da classe base.
Implementamos na subclasse Vampiro o método exclusivo <b>dormir()</b>. 

<div class=prg-code>
<span class="sc2">// Heranca_simples.cpp
</span><span class="sc0"></span><span class="sc2">// Este programa ilustra a herança de classes
</span><span class="sc0"></span><span class="sc9">#include &lt;iostream&gt;
</span><span class="sc0"></span><span class="sc9">#include &lt;string&gt;
</span><span class="sc0">
</span><span class="sc5">using</span><span class="sc0"> </span><span class="sc5">namespace</span><span class="sc0"> </span><span class="sc11">std</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc2">// ------------------ Classe monstro -----------------------------------------
</span><span class="sc0"></span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc16">public</span><span class="sc10">:</span><span class="sc0">
</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">m_estrago</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">string</span><span class="sc0"> </span><span class="sc11">m_nome</span><span class="sc10">;</span><span class="sc0">
	
</span><span class="sc11">Monstro</span><span class="sc10">(</span><span class="sc11">string</span><span class="sc0"> </span><span class="sc11">snome</span><span class="sc0"></span><span class="sc10">=</span><span class="sc0"></span><span class="sc6">"'monstro'"</span><span class="sc10">,</span><span class="sc0"></span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">estrago</span><span class="sc10">=</span><span class="sc4">10</span><span class="sc10">):</span><span class="sc0"> </span><span class="sc11">m_nome</span><span class="sc10">(</span><span class="sc11">snome</span><span class="sc10">),</span><span class="sc0"> </span><span class="sc11">m_estrago</span><span class="sc10">(</span><span class="sc11">estrago</span><span class="sc10">)</span><span class="sc0"></span><span class="sc10">{}</span><span class="sc0">
	
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">atacar</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"  O monstro "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">m_nome</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" te atacou  e vc perdeu "</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">m_estrago</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" pontos de energia. \n"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim do metodo atacar()
</span><span class="sc0">        
	
</span><span class="sc10">};</span><span class="sc0"> </span><span class="sc2">// fim da classe monstro
</span><span class="sc0">
</span><span class="sc2">// ------------------ Classe Ogro derivada da classe monstro  -----------------
</span><span class="sc0"></span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Ogro</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc16">public</span><span class="sc10">:</span><span class="sc0">
	
</span><span class="sc11">Ogro</span><span class="sc10">(</span><span class="sc11">string</span><span class="sc0"> </span><span class="sc11">snome</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"ogro"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">estrago</span><span class="sc10">=</span><span class="sc4">12</span><span class="sc10">):</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc10">(</span><span class="sc11">snome</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">estrago</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">
	
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">atacar</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"  O ogro "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">m_nome</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" te atacou com uma pedra e vc perdeu "</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">m_estrago</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" pontos de energia. \n"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim do metodo atacar() 
</span><span class="sc0">        
</span><span class="sc10">};</span><span class="sc0"> </span><span class="sc2">// fim da classe ogro
</span><span class="sc0">
</span><span class="sc2">// ------------------ Classe Vampiro derivada da classe monstro  -----------------
</span><span class="sc0"></span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Vampiro</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc16">public</span><span class="sc10">:</span><span class="sc0">     
</span><span class="sc11">Vampiro</span><span class="sc10">(</span><span class="sc11">string</span><span class="sc0"> </span><span class="sc11">snome</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"vampiro"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">estrago</span><span class="sc10">=</span><span class="sc4">22</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc11">m_nome</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">snome</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">m_estrago</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">estrago</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">
	
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">atacar</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"  O vampiro "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">m_nome</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" te mordeu e vc perdeu "</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">m_estrago</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" pontos de energia. \n"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim do metodo atacar()
</span><span class="sc0">        
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">dormir</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"  05:00 O sol vai surgir dentro de uma hora. Hora de vampiro dormir!"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\n"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim do metodo dormir() 
</span><span class="sc0">/span><span class="sc10">};</span><span class="sc0"> </span><span class="sc2">// fim da classe vampiro
</span><span class="sc0">
</span><span class="sc2">// protótipo das nossas funções básicas
</span><span class="sc0"></span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">inicio</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">fim</span><span class="sc10">();</span><span class="sc0">

</span><span class="sc2">// --------------- Nosso função principal comeca aqui...
</span><span class="sc0"></span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">main</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc11">inicio</span><span class="sc10">();</span><span class="sc0">   
	
</span><span class="sc11">Monstro</span><span class="sc0"> </span><span class="sc11">godzila</span><span class="sc10">(</span><span class="sc6">"godzila"</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">Ogro</span><span class="sc0"> </span><span class="sc11">shrek</span><span class="sc10">(</span><span class="sc6">"Shrek"</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">Vampiro</span><span class="sc0"> </span><span class="sc11">alucard</span><span class="sc10">(</span><span class="sc6">"Alucard"</span><span class="sc10">);</span><span class="sc0">

</span><span class="sc11">godzila</span><span class="sc10">.</span><span class="sc11">atacar</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc11">shrek</span><span class="sc10">.</span><span class="sc11">atacar</span><span class="sc10">();</span><span class="sc0">

</span><span class="sc11">alucard</span><span class="sc10">.</span><span class="sc11">atacar</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc11">alucard</span><span class="sc10">.</span><span class="sc11">dormir</span><span class="sc10">();</span><span class="sc0">   
	
</span><span class="sc11">fim</span><span class="sc10">();</span><span class="sc0">  
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// endmain
</span><span class="sc0">
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">inicio</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc11">system</span><span class="sc10">(</span><span class="sc6">"title heranca_simples.cpp"</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">system</span><span class="sc10">(</span><span class="sc6">"color f0"</span><span class="sc10">);</span><span class="sc0"> 
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\n"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// endfunction: inicio()
</span><span class="sc0">
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">fim</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">system</span><span class="sc10">(</span><span class="sc6">"pause"</span><span class="sc10">);</span><span class="sc0">    
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// endfunction: fim()</span></div>
	
<b><u>12.2 Tipo de herança - public ou private</b></u><font color="darkblue">
<b>class Ogro: public Monstro</b>	{	// código da classe	};	</font>
Esta é a sintaxe de derivação de classes, depois do nome da subclasse é colocado
dois pontos ( : ), o tipo de herança (<b>public</b>) e o nome da classe base (Monstro).

O tipo de herança pode ser <b>public ou private</b>. No tipo <b>public</b> todos os métodos e
propriedades conservam o tipo acesso da classe base, isto é, quem for <b>public</b> 
continua <b>public</b>, quem for <b>private</b> continua <b>private</b>. No tipo de herança <b>private</b>,
todos os métodos e propriedades se tornam <b>private</b> na subclasse. 

Vamos lembrar que tudo que for <b>public</b> pode ser acessado em qualquer parte
do programa. Métodos e propriedades <b>private</b> podem ser acessados apenas de
dentro da classe aonde foram definidos ou por funções <b>friend (amiga)</b> da classe.
Vamos ver posteriormente o tipo de função <b>friend</b>, entretanto adiantamos que são 
funções que obtém acesso a propriedades e métodos <b>private</b> de uma classe.
	<font color="darkblue">
Ogro(string snome = "ogro", int estrago=12)<b>: Monstro(snome, estrago) {} </b></font>
Na lista de inicialização do construtor da subclasse você pode chamar o
contrutor da classe base e passar variáveis para serem inicializadas.
		<font color="darkblue">
void atacar() {
cout << "  O vampiro " << m_nome << " te mordeu e vc perdeu ";
cout << m_estrago << " pontos de energia. \n";
} // fim do metodo atacar() </font>
Não é necessário nenhuma sintaxe especial para redefinir os métodos existentes
na classe base. Aqui o método <b>atacar()</b> foi  redefinido na  subclasse  Vampiro; 
caso não tivesse sido, ele rodaria exatamente como foi definido na classe Monstro.

<b><u>12.2 Introdução a classes virtuais</b></u>
A criação de array de objetos torna muito prático e confortável a manipulação de
muitos objetos. Por exemplo, utilizando as classes acima definidas poderíamos
criar uma lista de 100 vampiros e uma lista de 100 ogros e fazê-los atacar de uma
só vez.
		<font color="darkblue">
Vampiro lista_vampiros[100];
Ogro lista_ogro[100];
for (int ncx = 0; ncx < 100; ncx++) {
	lista_ogro[ncx].atacar();
	lista_vampiros[ncx].atacar();
} // endfor </font>

No bloco acima criamos separadamente uma lista de ogros e vampiros. Sabemos
que essas duas classes são derivadas da classe base Monstro. Se você
tivesse 100 tipos de montros, aquele bloco de código acima ficaria imenso.

A sintaxe de classe virtual permite que você aliste numa array de monstros
vampiros e ogros e outros tipos de monstros que vc definir, em palavras mais
técnicas, você consegue referenciar numa array de objetos da classe base todos
os tipos de objetos das subclasses. Quando você chamar o método atacar() dessa 
lista de objetos Monstros, se esse objeto for um vampiro ele atacará do jeito
particular de vampiro, se for um ogro atacará do jeito ogro de ser e tudo isso
você conseguirá fazer em poucas linhas dentro de um loop for() ou while().

Quando você define arrays de objetos no seu programa o compilador pré-reserva a
totalidade de memória que estes objetos vão ocupar e esta memória fica atrelada
ao seu programa até ele sair do ar.	Se durante o seu programa você utilizar 
menos memória do que a reservada então haverá desperdício de recursos do sistema.
Na situação inversa, se você precisar de mais memória você não poderá aumentar 
o tamanho da sua array.	

Então em um cenário ideal você vai alocar dinamicamente a quantidade de memória
que você necessitar e vai liberar essa memória ao sistema assim que você terminar
o uso dela. Você utilizará memória dinâmica em conjunto com classes virtuais.

Abaixo mostramos uma programa com um resultado <u>indesejável</u> de uma situação
que necessitaria o uso de classes virtuais para ser corrigida: Os ogros e vampiros
definidos executam o método genérico <b>atacar()</b> da classe base:
<div class=prg-code>
<img src="images\lista_monstros.png">

<span class="sc2">// lista_monstros.cpp
// Este programa ilustra array de objetos
</span><span class="sc9">#include &lt;iostream&gt;
</span><span class="sc0">
</span><span class="sc5">using</span><span class="sc0"> </span><span class="sc5">namespace</span><span class="sc0"> </span><span class="sc11">std</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc2">// ------------------ Classe monstro -----------------------------------------
</span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc16">public</span><span class="sc10">:</span><span class="sc0">
</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">m_estrago</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">m_id</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">nobj</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc11">Monstro</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">estrago</span><span class="sc10">=</span><span class="sc4">10</span><span class="sc10">):</span><span class="sc0"> </span><span class="sc11">m_estrago</span><span class="sc10">(</span><span class="sc11">estrago</span><span class="sc10">)</span><span class="sc0">
 </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc11">m_id</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0">  </span><span class="sc11">nobj</span><span class="sc10">;</span><span class="sc0">
  </span><span class="sc11">nobj</span><span class="sc10">++;</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0">

</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">atacar</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"  O monstro #"</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">m_id</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" te atacou  e vc perdeu "</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">m_estrago</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" pontos de energia. \n"</span><span class="sc10">;</span><span class="sc0">
 </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim do método atacar()   
</span><span class="sc10">};</span><span class="sc0"> </span><span class="sc2">// fim da classe monstro
</span><span class="sc0">
</span><span class="sc2">// inicialização da propriedade estática
</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc10">::</span><span class="sc11">nobj</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc2">// ------------------ Classe Ogro derivada da classe monstro  -----------------
</span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Ogro</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc16">public</span><span class="sc10">:</span><span class="sc0">

</span><span class="sc2">// construtor
</span><span class="sc11">Ogro</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">estrago</span><span class="sc10">=</span><span class="sc4">12</span><span class="sc10">):</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc10">(</span><span class="sc11">estrago</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0">

</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">atacar</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"  O ogro #"</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">m_id</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" te atacou com uma pedra e vc perdeu "</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">m_estrago</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" pontos de energia. \n"</span><span class="sc10">;</span><span class="sc0">
 </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim do método atacar()   
</span><span class="sc10">};</span><span class="sc0"> </span><span class="sc2">// fim da classe ogro
</span><span class="sc0">
</span><span class="sc2">// ------------------ Classe Vampiro derivada da classe monstro  -----------------
</span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Vampiro</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc16">public</span><span class="sc10">:</span><span class="sc0">

</span><span class="sc2">// construtor
</span><span class="sc11">Vampiro</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">estrago</span><span class="sc10">=</span><span class="sc4">22</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc11">m_estrago</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">estrago</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0">

</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">atacar</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"  O vampiro #"</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">m_id</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" te mordeu e vc perdeu "</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">m_estrago</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">" pontos de energia. \n"</span><span class="sc10">;</span><span class="sc0">
 </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim do método atacar()
</span><span class="sc10">};</span><span class="sc0"> </span><span class="sc2">// fim da classe vampiro
</span><span class="sc0">
</span><span class="sc2">// prototipo das nossas funções básicas
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">inicio</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">fim</span><span class="sc10">();</span><span class="sc0">

</span><span class="sc2">// --------------- Nossa função principal começa aqui...
</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">main</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc11">inicio</span><span class="sc10">();</span><span class="sc0">       

</span><span class="sc11">Monstro</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc11">ptr_monstros</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">];</span><span class="sc0">   
</span><span class="sc11">Vampiro</span><span class="sc0"> </span><span class="sc11">lista_vampiros</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">];</span><span class="sc0">  
</span><span class="sc11">Ogro</span><span class="sc0"> </span><span class="sc11">lista_ogro</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">];</span><span class="sc0">

</span><span class="sc11">ptr_monstros</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Ogro</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">ptr_monstros</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Ogro</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">ptr_monstros</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Vampiro</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">ptr_monstros</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Vampiro</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"--- Parte 01: vampiros e ogros via array -------------- \n"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">3</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc10">++)</span><span class="sc0"> </span><span class="sc11">lista_vampiros</span><span class="sc10">[</span><span class="sc11">ncx</span><span class="sc10">].</span><span class="sc11">atacar</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">3</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc10">++)</span><span class="sc0"> </span><span class="sc11">lista_ogro</span><span class="sc10">[</span><span class="sc11">ncx</span><span class="sc10">].</span><span class="sc11">atacar</span><span class="sc10">();</span><span class="sc0">

</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\n--- Parte 02: vampiros e ogros via ponteiros -------------- \n"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">4</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">ncx</span><span class="sc10">++)</span><span class="sc0"> </span><span class="sc11">ptr_monstros</span><span class="sc10">[</span><span class="sc11">ncx</span><span class="sc10">]-&gt;</span><span class="sc11">atacar</span><span class="sc10">();</span><span class="sc0">   

</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\n --- Parte 03: Contagem de objetos -------------- \n"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"  quantidade de monstros: "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">Monstro</span><span class="sc10">::</span><span class="sc11">nobj</span><span class="sc10">-</span><span class="sc4">1</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\n"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"  quantidade de monstros: "</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">lista_ogro</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">].</span><span class="sc11">nobj</span><span class="sc10">-</span><span class="sc4">1</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\n"</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc5">delete</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">ptr_monstros</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">fim</span><span class="sc10">();</span><span class="sc0">  
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// endmain
</span><span class="sc0">
</span><span class="sc2">// -------------------------- funções ----------------------------------------
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">inicio</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc11">system</span><span class="sc10">(</span><span class="sc6">"title array de objetos.cpp"</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">system</span><span class="sc10">(</span><span class="sc6">"color f0"</span><span class="sc10">);</span><span class="sc0"> 
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\n"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// endfunction: inicio()
</span><span class="sc0">
</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">fim</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">system</span><span class="sc10">(</span><span class="sc6">"pause"</span><span class="sc10">);</span><span class="sc0">    
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// endfunction: fim()</span></div>

<font color="darkblue">
<b>// Criando uma lista de ponteiros para objetos monstros</b>
Monstro *ptr_monstros[3];		
<b>// Inicializando os ponteiros para monstros com ogros e vampiros</b>
ptr_monstros[0] = new Ogro;
ptr_monstros[1] = new Ogro;
ptr_monstros[2] = new Vampiro;
ptr_monstros[3] = new Vampiro;
<b>// Atacando o jogador com vampiros e monstros!</b>
cout << "\n--- Parte 02: vampiros e ogros via ponteiros -------------- \n";
for (int ncx =0; ncx < 4; ncx++) <b>ptr_monstros[ncx]->atacar();</b>		
<b>// Liberando a memória dinâmica para o sistema</b>
delete[] ptr_monstros; </font>
Esse bloco de código está plenamente correto. Ele não produz o resultado
correto porque a classe não está definida como virtual. Vamos ver como
corrigir essa situação no próximo capítulo.

<b><u>12.3 Membros estáticos</b></u>
<font color="darkblue">static int nobj;</font>
Com muita frequência vai haver a necessidade de realizarmos a contagem ou o 
controle de criação de objetos. Essa contagem é feita através do uso de
membros estáticos que devem ser definidos na sintaxe mostrada no código acima.
Esse membro vai ser uma propriedade única da classe e não vai se tornar 
particular de nenhum objeto criado embora todos os objetos possam acessá-lo.
O valor inicial dessa propriedade deve ser inicializada fora da classe 
dessa forma: <font color="darkblue">int Monstro::nobj = 1; </font>

O acesso pode ser feito utilizando o nome da classe ou utilizando o nome
de qualquer objeto:	<font color="darkblue">
nqtd = Monstro::nobj 			// acesso pelo nome da classe
nqtd = lista_ogro[1].nobj		// acesso pelo nome de qualquer objeto </font>

Você também pode definir a propriedade estática como <b>private</b> e assim para prover
acesso a ela você deve definir funções de acesso. Estas funções também podem
ser definidas como <b>static</b> e assim elas serão únicas para a classe tal
como as propriedades definidas dessa forma.	
		
<hr>	
<table align="bottom" border="0" cellspacing="0" cellpadding="0" width="20%">
<tr><td><a href="cppvip.html#start" style="color:blue"> index </a></td>
<td><a href="track11.html" style="color:blue">&lt;&lt;</a></td>
<td><a href="track13.html" style="color:blue">&gt;&gt;</a></td></tr></table><br><pre>
<hr><div style='background-color:lightyellow;color:blue'>
<center>Produzido por Gameprog: Jair Pereira - Fev/2006 - Junho/2013 ©
gameprog.br@gmail.com
<a href='http://www.gameprog.com.br'>http://www.gameprog.com.br</a></center><hr></div></div></body></html>
