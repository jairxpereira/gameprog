<html>
<head>
<title>Gameprog_CPP_fase_25</title>
<head>
<style type="text/css">
.dica {	width:500pt; background:aliceblue;color:#700080}
span {
font-family: 'Courier New';
font-size: 10pt;
color: #000000;
}
.sc0 {
}


.sc1 {
color: darkgreen;
font-weight: bold;
}

.sntx {
color: darkgreen;
}


.sc2 {
color: #008000;
}
.sc4 {
color: #ff8000;
}
.sc5 {
font-weight: bold;
color: #0000FF;
}
.sc6 {
color: #FF0000;
}
.sc9 {
color: #804000;
font-weight: bold;
}
.sc10 {
font-weight: bold;
color: #000080;
}
.sc11 {
}
.sc16 {
color: #400080;
}

.prg {
color: #0000FF;
}

.prg-saida {

margin-left:0px;
width:500pt;
background-color:lightblue;

}

.prg-code {
margin-left:0px;
width:500pt;
background-color:lightyellow;
padding:10px;
font-weight:bold;
}


.niceview {
margin-left:0px;
width:500pt;
background-color:white;
border-color:lightgray;
border-width:1px;
border-style:solid;
padding:10px;
}

td
{
padding:3px;
}

table.dados
{

margin-left:0px;
width:53.5em;
border-collapse:collapse;
border:1px solid red;
text-align:center;
}

th
{
background-color:darkgreen;
color:yellow;
font-weight:bold;
text-transform:uppercase;
}
body
{
margin-left:60px;
}
.pagebody
{
padding:10px;
margin-left:50px;
border-width:1px;
border-style:solid;
border-color:white;
background-color:white;
width:90%;
}
.mybody
{
margin-top:20pt;
margin-bottom:20pt;
margin-left:20pt;
margin-right:20pt;
/* border-width:1px; */
/* border-style:solid; */
border-color:lightgray;
background-image:url('bg_azul.png');
}
</style>
<body class=mybody><font color="black">
<div class=pagebody>
<hr>
<center><b style="font-size:1.5em;" >Curso completo de linguagem C++</b><br>
Gameprog - Escola de programação de jogos digitais<br>
Contato: gameprog.br@gmail.com<br>
<b>track25.html</b></center>
<hr>
<table border="0" cellspacing="0" cellpadding="0" width="20%">
<tr><td><a href="cppvip.html#start" style="color:blue"> index </a></td>
<td><a href="track24.html" style="color:blue">&lt;&lt;</a></td>
<td><a href="track26.html" style="color:blue">&gt;&gt;</a></td></tr></table>
<hr><pre>
<a name="track23"></a><h3 style="background-color:#80ff80">25. Lista - &lt;list&gt;</h3>
<b><u>25.1 Visão geral</b></u> 

A estrutura lista é implementada pela classe genérica <b>list</b> e funciona de maneira
semelhante a uma corrente com a movimentação de entrada e saída de elos nas
duas extremidades, aonde também os elos podem ser acrescentados ou retirados
de qualquer posição dessa corrente.

A melhor maneira de visualizar o potencial da estrutura lista, é imaginar
uma linha do itinerário de um ônibus aonde as paradas podem ser excluídas
ou adicionadas nas extremidades da rota geral do ônibus, e qualquer parada
em qualquer ponto do trajeto pode ser deletada e/ou inserida para reparo 
do itinerário.		

<img src="images\nave_nortesul.png">
Em programação de jogos você pode destinar a lista para duas finalidades, por 
exemplo em um jogo de nave com orientação norte-sul ou oeste-leste, você pode
mapear uma linha de tiros aonde você destrói as balas da extremidade final que
sairam do campo de visão, e você adiciona balas na extremidade inicial da
linha por causa do evento de atirar acionado pelo jogador. 

Em outro exemplo, a lista também pode ser usada para mapear um caminho, com 
novas posições sendo adicionadas ou retiradas das extremidades, inserindo
ou excluindo de qualquer posição pontos desfavoráveis do caminho sendo
mapeado.

Em um programa de desenhos vetoriais a lista pode ser usada para guardar as 
formas geométricas desenhadas pelo usuário. Em uma operação de desfazer você
pode remover facilmente o último ato executado da lista. Na edição do desenho
você consegue acrescentar facilmente qualquer outra figura em qualquer outra
posição utilizando a estrutura lista.

<div class=prg-code>
<img src="images\lista_tst.png">

<span class="sc2">// lista_tst.cpp
// Esse programa exemplica o uso de listas
</span><span class="sc9">#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;list&gt;
</span><span class="sc5">using</span><span class="sc0"> </span><span class="sc5">namespace</span><span class="sc0"> </span><span class="sc11">std</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc11">list</span><span class="sc10">&lt;</span><span class="sc11">string</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">smetroLista</span><span class="sc10">;</span><span class="sc0"> 
</span><span class="sc11">list</span><span class="sc10">&lt;</span><span class="sc11">string</span><span class="sc10">&gt;::</span><span class="sc11">iterator</span><span class="sc0"> </span><span class="sc11">ncx_pos</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">string</span><span class="sc0"> </span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">10</span><span class="sc10">];</span><span class="sc0">

</span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">mostrar_lista</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
</span><span class="sc5">for</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">ncx_pos</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">begin</span><span class="sc10">();</span><span class="sc0"> </span><span class="sc11">ncx_pos</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">end</span><span class="sc10">();</span><span class="sc0"> </span><span class="sc10">++</span><span class="sc11">ncx_pos</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> 
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc11">ncx_pos</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"--"</span><span class="sc10">;</span><span class="sc0"> 
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// fim da função: mostrar_lista()
</span><span class="sc0">
</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">main</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> 
</span><span class="sc11">system</span><span class="sc10">(</span><span class="sc6">"color f0"</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc11">system</span><span class="sc10">(</span><span class="sc6">"title lista_tst.cpp"</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc2">// Nossso metro virtual....
</span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"(1)SP"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"(2)Diadema"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"(3)SBC"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">4</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"(4)SA"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">5</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"(5)SC"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">6</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"(6)Maua"</span><span class="sc10">;</span><span class="sc0">    
</span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">7</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"(7)Santos"</span><span class="sc10">;</span><span class="sc0">    
</span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">8</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"(8)RJ"</span><span class="sc10">;</span><span class="sc0">    
</span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">9</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"(9)MG"</span><span class="sc10">;</span><span class="sc0">  

</span><span class="sc2">// Vamos inserir dados na frente da lista
</span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">push_front</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">4</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0"> 
</span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">push_front</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0"> 
</span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">push_front</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0"> 
</span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">push_front</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0"> 

</span><span class="sc2">// Vamos inserir dados no fundo da lista
</span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">push_back</span><span class="sc10">(</span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">5</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0"> 
</span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">push_back</span><span class="sc10">(</span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">7</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0"> 
</span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">push_back</span><span class="sc10">(</span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">8</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0"> 
</span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">push_back</span><span class="sc10">(</span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">9</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0"> 

</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\tEsquecemos de colocar a cidade #6"</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">mostrar_lista</span><span class="sc10">();</span><span class="sc0">

</span><span class="sc2">// Opa! Esquecemos de adicionar o metro[6] na lista antes do [7]. 
// Vamos primeiro obter o iterator que aponta para a posicao aonde queremos
// inserir nosso dado. Vamos fazer uma busca linear para encontrar esta
// posicao.
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\tColocamos Maua' de volta no mapa..."</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0"> 
</span><span class="sc5">for</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">ncx_pos</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">begin</span><span class="sc10">();</span><span class="sc0"> </span><span class="sc11">ncx_pos</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">end</span><span class="sc10">();</span><span class="sc0"> </span><span class="sc10">++</span><span class="sc11">ncx_pos</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> 
</span><span class="sc5">if</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc11">ncx_pos</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">7</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0"> 

</span><span class="sc2">// Vamos inserir o metro[6] aonde esta' o [7]. Isso nao deleta o [7], isso...
// ...insere o [6] entre o [5] e o [7].
</span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">insert</span><span class="sc10">(</span><span class="sc11">ncx_pos</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">metro</span><span class="sc0"> </span><span class="sc10">[</span><span class="sc4">6</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0"> 
</span><span class="sc11">mostrar_lista</span><span class="sc10">();</span><span class="sc0">

</span><span class="sc2">// Vamos deletar alguns itens...
</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc6">"\tDeletamos o metro[7], a frente e o fundo da lista...\n"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">remove</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">metro</span><span class="sc10">[</span><span class="sc4">7</span><span class="sc10">]);</span><span class="sc0">
</span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">pop_front</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc11">smetroLista</span><span class="sc10">.</span><span class="sc11">pop_back</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc11">mostrar_lista</span><span class="sc10">();</span><span class="sc0"> 

</span><span class="sc11">cout</span><span class="sc0"> </span><span class="sc10">&lt;&lt;</span><span class="sc0"> </span><span class="sc11">endl</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">system</span><span class="sc10">(</span><span class="sc6">"pause"</span><span class="sc10">);</span><span class="sc0">

</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">// endfunction: main()</span></div>

<b><u>Declarando a lista</b></u> <font color="darkblue">
#include &lt;list&gt;
list&lt;string&gt; smetroLista; 
list&lt;string&gt;::iterator ncx_pos = 0; </font>
O bloco de código acima exemplifica os passos necessários para utilização de
uma lista no programa. Você deve incluir o arquivo da classe <b>list (#include &lt;list&gt;)</b>,
declarar uma lista na forma da sintaxe <b class="cpp1-preprocessor">list&lt;tipo_de_dado&gt; nome_da_lista;</b> e,
como provavelmente você vai querer navegar pelos dados, você deve declarar
um iterator na forma <b class="cpp1-preprocessor">list&lt;tipo_de_dado&gt;::iterator nome_do_iterator;</b> para
acessá-los.

<b><u>Colocando dados na lista</b></u> 
Você pode adicionar dados facilmente no início e no fim da lista utilizando
respectivamente os métodos <b>.push_front (elemento) e .push_back (elemento)</b> do
objeto da classe list.

Porém para determinar a posição aonde o dado vai ser inserido você deve usar
um iterator obtido com os métodos .begin() ou .end() realizando o 
deslocamento relativo a estas posições na forma de um pequeno looping, ex.: <font color="darkblue">
ncx_pos = smetroLista.begin();
for (int mypos=1; mypos < 3; mypos++) ncx_pos++;
smetroLista.insert ( ncx_pos, "03 - ta' hackeado!"); </font>
Em nosso programa exemplo issso foi feito dessa forma:<font color="darkblue">
// Opa! Esquecemos de adicionar o metro[6] na lista antes do [7]. 
// Vamos primeiro obter o iterator que aponta para a posicao aonde queremos
// inserir nosso dado. Vamos fazer uma busca linear para encontrar esta
// posicao.
cout &lt;&lt; "\tColocamos Maua' de volta no mapa..." &lt;&lt; endl; 
<b>for( ncx_pos = smetroLista.begin(); ncx_pos != smetroLista.end(); ++ncx_pos ) </b>
if( *ncx_pos == metro[7] ) break; 

// Vamos inserir o metro[6] aonde esta' o [7]. Isso nao deleta o [7], isso...
// ...insere o [6] entre o [5] e o [7].
smetroLista.insert(ncx_pos, metro [6] ); </font>
Veja que utilizamos um <b>looping for</b> para avançar o iterator.

<b><u>Removendo elementos</b></u> 
Remover elementos é simples com esses métodos:
<b>.pop_front()</b>		- remove o item da frente da lista;
<b>.pop_back()</b> 		- remove o item do fim da lista;
<b>.remove( elemento )</b> 	- remove diretamente o elementos especificado.

Reveja como fizemos em nosso programa: <font color="darkblue">
// Vamos deletar alguns itens...
cout << "\tDeletamos o metro[7], a frente e o fundo da lista...\n";
smetroLista.remove( metro[7]);
smetroLista.pop_front();
smetroLista.pop_back();	</font>

<b><u>Obtendo o tamanho da lista</b></u> 
O tamanho da lista é obtido com o método <b>.size()</b>.

<hr>
<table align="bottom" border="0" cellspacing="0" cellpadding="0" width="20%">
<tr><td><a href="cppvip.html#start" style="color:blue"> index </a></td>
<td><a href="track24.html" style="color:blue">&lt;&lt;</a></td>
<td><a href="track26.html" style="color:blue">&gt;&gt;</a></td></tr></table><br><pre>
<hr><div style='background-color:lightyellow;color:blue'>
<center>Produzido por Gameprog: Jair Pereira - Fev/2006 - Junho/2013 ©
gameprog.br@gmail.com
<a href='http://www.gameprog.com.br'>http://www.gameprog.com.br</a></center><hr></div></div></body></html>