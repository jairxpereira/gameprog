<html>
<head>
<title>mdx9_fase10-1</title>
<style type="text/css">
span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #000000;
}
.sc0 {
}


.sc1 {
	color: darkgreen;
	font-weight: bold;
}

.sntx {
	color: darkgreen;
	}


.sc2 {
	color: #008000;
}
.sc4 {
	color: #ff8000;
}
.sc5 {
	font-weight: bold;
	color: #0000FF;
}
.sc6 {
	color: #FF0000;
}
.sc9 {
	color: #804000;
	font-weight: bold;
}
.sc10 {
	font-weight: bold;
	color: #000080;
}
.sc11 {
}
.sc16 {
	color: #400080;
}

.prg {
	color: #0000FF;
}

.prg-saida {

	margin-left:0px;
	width:500pt;
	background-color:lightblue;	
}

.prg-code {
	margin-left:0px;
	width:515pt;
	background-color:lightyellow;
	padding:10px;
	font-weight:bold;
}


.niceview {
	margin-left:0px;
	width:500pt;
	background-color:white;
	border-color:lightgray;
	border-width:1px;
	border-style:solid;
	padding:10px;
}

td
{
padding:3px;
}

table.dados
{
margin-left:0px;
width:53.5em;
border-collapse:collapse;
border:1px solid red;
text-align:center;
}

th
{
background-color:darkgreen;
color:yellow;
font-weight:bold;
text-transform:uppercase;
}

.pagebody
{
padding:10px;
margin-left:50px;
border-width:1px;
border-style:solid;
border-color:white;
background-color:white;
width:90%;
}
.mybody
{
margin-top:20pt;
margin-bottom:20pt;
margin-left:20pt;
margin-right:20pt;
border-color:lightgray;
background-image:url('background.png');
}
</style>
</head>
<body class=mybody><font color='black'>
<div class=pagebody>
<hr>
<center><b style='font-size:1.5em;' >Curso completo de DirectX Gerenciado</b><br>
Gameprog - Escola de programação de jogos digitais<br>
Contato: gameprog.br@gmail.com<br>
<b>Fase 10-1</b></center>
<hr>
<table align='left' border='0' cellspacing='0' cellpadding='0' width='20%'>
<tr><td><a href='mdx9.html#start' style='color:blue'> index </a></td>
<td><a href='track09-2.html' style='color:blue'>&lt;&lt;</a></td>
<td><a href='track10-2.html' style='color:blue'>&gt;&gt;</a></td></tr></table><br><pre>
<hr><a name='topo'></a>
<h3 style='background-color:#80ff80'>10.1 O que é HLSL?</h3><pre>
<b><u>1.1 Visão geral</b></u>
<div class=prg-code>* Amostras de exemplo produzidas no software RenderMonkey da AMD com hlsl:
<img src=images\hlsl_intro.png></div>
Em resumo, <b>HLSL</b> é uma linguagem de programação com comunicação direta
com a placa de aceleração de vídeo.   A linguagem tem dois propósitos
principais que  consistem em habilitar o acesso a transformação final
dos vértices  e  o acesso na composição da cor final do pixel através
de um programa  escrito  que  o  DirectX  transfere  para  a placa de
video executar.

HLSL é uma abreviação para <b>High Level Shader  Language</b>  que  pode ser
traduzido  como  <span class=prg>linguagem  de programação de shader de alto nível</span>. O 
alto  nível é por conta da linguagem trazer os padrões da linguagem C
em contraste com sua outra versão expressada em linguagem assembly.

A linguagem de programação de shaders é uma das grandes revoluções da
computação gráfica e surgiu inicialmente dentro do ambiente do desenho
animado cinematográfico. Foi criada pela Pixar que produziu Toy Story
e  dezenas  de outros filmes animados.   Hoje a produção dos melhores
videogames  ou  a  produção  dos melhores efeitos especiais do cinema
não ocorre mais sem a presença do shader programado. HLSL é padrão da
Microsoft  e  a  linguagem original da Pixar chama-se Renderman Shader
Language.

O surgimento do HLSL dividiu o modelo de  produção  gráfica  em  duas
linhas de produção distintas:<b>a linha de funções fixas</b> (<span class=prg>fixed-function
pipeline</span> no inglês da Microsoft) e a <b>linha programável</b>  (<span class=prg>programmable
pipeline</span>). A  linha  de  funções  fixas  é o modelo mais antigo aonde
cada  recurso que a placa de vídeo oferece é traduzida por uma função
fixa criada para explorá-lo.  A linha de funções fixas coloca entre o 
programador  e  a  placa  de  video  uma  complicada  API  gráfica, o 
DirectX aqui no caso.  A  linha  programável permite o contato direto
com  a  placa  de  vídeo,  dando  ao  programador  mais  poder,  mais 
performance, mais liberdade criativa e produtiva,  e  também  reduz o 
fardo da complexidade do DirectX.  É  muito mais simples e muito mais
fácil  produzir  as coisas com HLSL dentro da placa da vídeo  do  que
utilizar código DirectX similar.

A  estrutura  interna  da  placa  de  video  e  o conjunto de funções
produzidas que  modificam a posição final dos vértices  é  chamado de
<b class=prg>VertexShader</b>;  a  estrutura  interna  com  o  conjunto de funções que 
modificam a composição da cor final do pixel é chamado de <b class=prg>PixelShader.</b>

O modelo de shader é composto então pelo pixelshader  e  vertexshader
que surgiu inicialmente na versão 1.0 com o DirectX 8.  O  DirectX  9
suporta o modelo 3.0 e o modelo mais atual é o 5.0 presente no DirectX
11. Nossa aplicação foi escrita utilizando o modelo 1.1.

No subtópico abaixo é exibido o primeiro programa em hlsl com o qual 
você  vai  travar  contato nesse curso apenas para você  perceber  o  
quanto  o  programa  tem  semelhança  com  um  programa  escrito  na 
linguagem C++.

<b><u>1.2 O primeiro programa em HLSL</u></b>
<div class=prg-code><img src=images\prj_HLSL01.png></div>
<div class=prg-code>
<span class=sc2>// Gameprog: Introdução a programação em HLSL</span>
<span class=sc2>// Arquivo: simples.fx - prj_HSL01</span>

<span class=sc2>// Matriz de projeção e visualização</span>
<span class=prg>float4x4 </span>Camera : <span class=sc16>WORLDVIEWPROJECTION;</span>
<span class=prg>float </span>nMovimento; 

<span class=sc2>// Transforma coordenadas 3d em espaço de tela</span>
<span class=prg>float4 </span>vs_Main( <span class=prg>float4 </span>Pos  : <span class=sc16>POSITION</span>)  : <span class=sc16>POSITION</span>
<span class=sc16>{</span>
 <span class=sc2>// Declara variável de saída</span>
 <span class=prg>float4 </span>saida_pos; 

 <span class=sc2>// Transforma posição</span>
 <span class=prg>Pos.z </span>+= nMovimento * 2; 
 saida_pos = <b class=prg>mul</b>(Pos, Camera);  

 <span class=sc2>// Retorna posição transformada</span>
 <span class=sc6>return </span>saida_pos; 
<span class=sc16>} <span class=sc2>// vs_Main().fim</span></span>


<span class=prg>float4 </span>ps_Main (  ) : <span class=sc16>COLOR0</span>
<span class=sc16>{</span>
 <span class=sc2>// Declara uma variável para cor no padrão RGBA</span>
 <span class=prg>float4 </span>cor = <span class=prg>float4 </span>(<span class=sc4>0.0f</span>, <span class=sc4>0.0f</span>, <span class=sc4>0.0f</span>, <span class=sc4>0.0f</span>);  

 <span class=sc2>// Configura individualmente os canais de cor</span>
 <span class=prg>cor.r  </span>= nMovimento; 
 <span class=prg>cor.b  </span>= <span class=sc4>1 </span>- nMovimento; 
 <span class=prg>cor.ga </span>= <span class=sc4>1.0f;</span>

 <span class=sc6>return </span>cor; 
<span class=sc16>} <span class=sc2>// ps_Main().fim</span></span>



<span class=sc5>technique </span>MovimentoCor 
<span class=sc16>{</span>
 <span class=sc5>pass </span>P0 
  <span class=sc16>{</span>
  <span class=sc2>// Configura alguns estados do dispositivo</span>
  <span class=sc6>CullMode </span>= None; 
  <span class=sc6>FillMode </span>= Solid; 

  <span class=sc2>// Compila o VertexShader e o PixelShader</span>
  <span class=sc5>VertexShader </span>= <span class=prg>compile </span><span class=sc16>vs_1_1 </span>vs_Main();  
  <span class=sc5>PixelShader </span> = <span class=prg>compile </span><span class=sc16>ps_1_1 </span>ps_Main();  

  <span class=sc16>} <span class=sc2>// fim do passo P0</span></span>
<span class=sc16>} <span class=sc2>// fim da técnica</span></span>
</div>
<hr>
<table align='bottom' border='0' cellspacing='0' cellpadding='0' width='20%'>
<tr><td><a href='mdx9.html#start' style='color:blue'> index </a></td>
<td><a href='track10-0.html' style='color:blue'>&lt;&lt;</a></td>
<td><a href='track10-2.html' style='color:blue'>&gt;&gt;</a></td></tr></table><pre>
<hr><div style='background-color:lightyellow;color:blue'>
<center>Produzido por Gameprog: Jair Pereira - Março/2014 ©
gameprog.br@gmail.com
<a href='http://www.gameprog.com.br'>http://www.gameprog.com.br</center><hr></div></div></body></html>